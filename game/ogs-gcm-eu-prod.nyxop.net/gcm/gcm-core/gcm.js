var gcm=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=43)}([function(e,t,n){!function(n,r){e.exports=t=r()}(0,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=0;i<t;i+=4){var o=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var i=(n<<16)+t&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}}(4294967296*(n||e.random()));n=987654071*o(),r.push(4294967296*o()|0)}return new a.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=4*o,c=i/s;c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0);var u=c*o,l=e.min(4*u,i);if(u){for(var f=0;f<u;f+=o)this._doProcessBlock(r,f);var h=r.splice(0,u);n.sigBytes-=l}return new a.init(h,l)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(i.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return e})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(3))}(0,function(e){e.lib.Cipher||function(t){var n=e,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc,c=(s.Utf8,s.Base64),u=n.algo,l=u.EvpKDF,f=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?O:S}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),h=(r.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),d=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=h.CBC=function(){function e(e,n,r){var i=this._iv;if(i){var o=i;this._iv=t}else var o=this._prevBlock;for(var a=0;a<r;a++)e[n+a]^=o[a]}var n=d.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),n.Decryptor=n.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=o}}),n}(),m=n.pad={},g=m.Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var c=o.create(a,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(r.BlockCipher=f.extend({cfg:f.cfg.extend({mode:p,padding:g}),reset:function(){f.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=n.format={},E=y.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=o.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(c)},parse:function(e){var t=c.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=o.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:r})}},S=r.SerializableCipher=i.extend({cfg:i.extend({format:E}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return v.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=n.kdf={},_=b.OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var i=l.create({keySize:t+n}).compute(e,r),a=o.create(i.words.slice(t),4*n);return i.sigBytes=4*t,v.create({key:i,iv:a,salt:r})}},O=r.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:_}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=S.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,S.decrypt.call(this,e,t,i.key,r)}})}()})},function(e,t,n){"use strict";function r(e){return"[object Array]"===w.call(e)}function i(e){return"[object ArrayBuffer]"===w.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function c(e){return"number"==typeof e}function u(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===w.call(e)}function h(e){return"[object File]"===w.call(e)}function d(e){return"[object Blob]"===w.call(e)}function p(e){return"[object Function]"===w.call(e)}function m(e){return l(e)&&p(e.pipe)}function g(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function v(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function E(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function S(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=S(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)E(arguments[n],e);return t}function b(e,t,n){return E(t,function(t,r){e[r]=n&&"function"==typeof t?_(t,n):t}),e}var _=n(37),O=n(103),w=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isBuffer:O,isFormData:o,isArrayBufferView:a,isString:s,isNumber:c,isObject:l,isUndefined:u,isDate:f,isFile:h,isBlob:d,isFunction:p,isStream:m,isURLSearchParams:g,isStandardBrowserEnv:y,forEach:E,merge:S,extend:b,trim:v}},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(20),n(21))}(0,function(e){return function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),o=i.create(),a=o.words,s=n.keySize,c=n.iterations;a.length<s;){u&&r.update(u);var u=r.update(e).finalize(t);r.reset();for(var l=1;l<c;l++)u=r.finalize(u),r.reset();o.concat(u)}return o.sigBytes=4*s,o}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.EvpKDF})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={ERROR:"ERROR",SESSION_TIMER:"SESSION_TIMER",SESSION_STATS:"SESSION_STATS",BONUS_BAR:"BONUS_BAR",BONUS_BAR_FILLED:"BONUS_BAR_FILLED",FREEBET_REWARD:"FREEBET_REWARD",GENERIC_MESSAGE:"GENERIC_MESSAGE",GS_MESSAGE:"GS_MESSAGE",COMMONUI_FREEROUNDS_AWARD:"COMMONUI_FREEROUNDS_AWARD",COMMONUI_FREEROUNDS_IN_PROGRESS:"COMMONUI_FREEROUNDS_IN_PROGRESS",COMMONUI_FREEROUNDS_UPDATE:"COMMONUI_FREEROUNDS_UPDATE",GAME_FREEROUNDS_UPDATE:"GAME_FREEROUNDS_UPDATE",SYNDICATED_JACKPOT_WIN_AWARD:"SYNDICATED_JACKPOT_WIN_AWARD",SYNDICATED_JACKPOT_PROGRESS_BAR:"SYNDICATED_JACKPOT_PROGRESS_BAR"},a={CATEGORY:"errorCategory",SEVERITY:"errorSeverity",CODE:"errorCode",MESSAGE:"errorMessage",PARAMS:"errorParams"},s={STAKES:"stakes",WINNINGS:"winnings",TURNOVER:"turnover"},c={PERCENT:"percent"},u={AMOUNT:"freebet"},l=[o.ERROR,o.SESSION_TIMER,o.SESSION_STATS,o.BONUS_BAR,o.BONUS_BAR_FILLED,o.FREEBET_REWARD,o.GENERIC_MESSAGE];t.GCMNotification=function(){function e(t,n,i){r(this,e),this.type=t,this.body=n,this.callback_=i,this.isUnique_=!1,e.prototype.isUnique=function(){return this.isUnique_},e.prototype.invokeCallback=function(e){this.callback_&&this.callback_.call(null,e)},e.prototype.markAsUnique=function(){this.isUnique_=!0}}return i(e,null,[{key:"TYPE",get:function(){return o}},{key:"ERROR",get:function(){return a}},{key:"SESSION_STATS",get:function(){return s}},{key:"SESSION_TIMER",get:function(){}},{key:"BONUS_BAR",get:function(){return c}},{key:"FREEBET",get:function(){return u}},{key:"GENERIC_MESSAGE",get:function(){return GENERIC_MESSAGE}},{key:"ASAP",get:function(){return o.ERROR}},{key:"TIMEOUT",get:function(){}},{key:"ACK",get:function(){return l}}]),e}()},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){return function(){function t(e,t,n){for(var r=[],o=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2;r[o>>>2]|=(s|c)<<24-o%4*8,o++}return i.create(r,o)}var n=e,r=n.lib,i=r.WordArray,o=n.enc;o.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=t[o>>>2]>>>24-o%4*8&255,s=t[o+1>>>2]>>>24-(o+1)%4*8&255,c=t[o+2>>>2]>>>24-(o+2)%4*8&255,u=a<<16|s<<8|c,l=0;l<4&&o+.75*l<n;l++)i.push(r.charAt(u>>>6*(3-l)&63));var f=r.charAt(64);if(f)for(;i.length%4;)i.push(f);return i.join("")},parse:function(e){var n=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(n=s)}return t(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){return function(t){function n(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function r(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function i(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function o(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}var a=e,s=a.lib,c=s.WordArray,u=s.Hasher,l=a.algo,f=[];!function(){for(var e=0;e<64;e++)f[e]=4294967296*t.abs(t.sin(e+1))|0}();var h=l.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var s=t+a,c=e[s];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var u=this._hash.words,l=e[t+0],h=e[t+1],d=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],v=e[t+6],y=e[t+7],E=e[t+8],S=e[t+9],b=e[t+10],_=e[t+11],O=e[t+12],w=e[t+13],C=e[t+14],I=e[t+15],T=u[0],A=u[1],R=u[2],k=u[3];T=n(T,A,R,k,l,7,f[0]),k=n(k,T,A,R,h,12,f[1]),R=n(R,k,T,A,d,17,f[2]),A=n(A,R,k,T,p,22,f[3]),T=n(T,A,R,k,m,7,f[4]),k=n(k,T,A,R,g,12,f[5]),R=n(R,k,T,A,v,17,f[6]),A=n(A,R,k,T,y,22,f[7]),T=n(T,A,R,k,E,7,f[8]),k=n(k,T,A,R,S,12,f[9]),R=n(R,k,T,A,b,17,f[10]),A=n(A,R,k,T,_,22,f[11]),T=n(T,A,R,k,O,7,f[12]),k=n(k,T,A,R,w,12,f[13]),R=n(R,k,T,A,C,17,f[14]),A=n(A,R,k,T,I,22,f[15]),T=r(T,A,R,k,h,5,f[16]),k=r(k,T,A,R,v,9,f[17]),R=r(R,k,T,A,_,14,f[18]),A=r(A,R,k,T,l,20,f[19]),T=r(T,A,R,k,g,5,f[20]),k=r(k,T,A,R,b,9,f[21]),R=r(R,k,T,A,I,14,f[22]),A=r(A,R,k,T,m,20,f[23]),T=r(T,A,R,k,S,5,f[24]),k=r(k,T,A,R,C,9,f[25]),R=r(R,k,T,A,p,14,f[26]),A=r(A,R,k,T,E,20,f[27]),T=r(T,A,R,k,w,5,f[28]),k=r(k,T,A,R,d,9,f[29]),R=r(R,k,T,A,y,14,f[30]),A=r(A,R,k,T,O,20,f[31]),T=i(T,A,R,k,g,4,f[32]),k=i(k,T,A,R,E,11,f[33]),R=i(R,k,T,A,_,16,f[34]),A=i(A,R,k,T,C,23,f[35]),T=i(T,A,R,k,h,4,f[36]),k=i(k,T,A,R,m,11,f[37]),R=i(R,k,T,A,y,16,f[38]),A=i(A,R,k,T,b,23,f[39]),T=i(T,A,R,k,w,4,f[40]),k=i(k,T,A,R,l,11,f[41]),R=i(R,k,T,A,p,16,f[42]),A=i(A,R,k,T,v,23,f[43]),T=i(T,A,R,k,S,4,f[44]),k=i(k,T,A,R,O,11,f[45]),R=i(R,k,T,A,I,16,f[46]),A=i(A,R,k,T,d,23,f[47]),T=o(T,A,R,k,l,6,f[48]),k=o(k,T,A,R,y,10,f[49]),R=o(R,k,T,A,C,15,f[50]),A=o(A,R,k,T,g,21,f[51]),T=o(T,A,R,k,O,6,f[52]),k=o(k,T,A,R,p,10,f[53]),R=o(R,k,T,A,b,15,f[54]),A=o(A,R,k,T,h,21,f[55]),T=o(T,A,R,k,E,6,f[56]),k=o(k,T,A,R,I,10,f[57]),R=o(R,k,T,A,v,15,f[58]),A=o(A,R,k,T,w,21,f[59]),T=o(T,A,R,k,m,6,f[60]),k=o(k,T,A,R,_,10,f[61]),R=o(R,k,T,A,d,15,f[62]),A=o(A,R,k,T,S,21,f[63]),u[0]=u[0]+T|0,u[1]=u[1]+A|0,u[2]=u[2]+R|0,u[3]=u[3]+k|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=u._createHelper(h),a.HmacMD5=u._createHmacHelper(h)}(Math),e.MD5})},function(e,t,n){"use strict";function r(e,t){return t+": "+e.toString()+"\n"}function i(e,t,n,r){"object"==typeof n?t[r]=s(e[r],n):-1===e.indexOf(n)&&t.push(n)}function o(e,t,n){t[n]=e[n]}function a(e,t,n,r){"object"==typeof t[r]&&t[r]&&e[r]?n[r]=s(e[r],t[r]):n[r]=t[r]}function s(e,t){var n=Array.isArray(t),r=n&&[]||{};return n?(e=e||[],r=r.concat(e),t.forEach(i.bind(null,e,r))):(e&&"object"==typeof e&&Object.keys(e).forEach(o.bind(null,e,r)),Object.keys(t).forEach(a.bind(null,e,t,r))),r}function c(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}var u=n(29),l=t.ValidationError=function(e,t,n,r,i,o){r&&(this.property=r),e&&(this.message=e),n&&(n.id?this.schema=n.id:this.schema=n),t&&(this.instance=t),this.name=i,this.argument=o,this.stack=this.toString()};l.prototype.toString=function(){return this.property+" "+this.message};var f=t.ValidatorResult=function(e,t,n,r){this.instance=e,this.schema=t,this.propertyPath=r.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.disableFormat=n&&!0===n.disableFormat};f.prototype.addError=function(e){var t;if("string"==typeof e)t=new l(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new l(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},f.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},f.prototype.toString=function(e){return this.errors.map(r).join("")},Object.defineProperty(f.prototype,"valid",{get:function(){return!this.errors.length}});var h=t.SchemaError=function e(t,n){this.message=t,this.schema=n,Error.call(this,t),Error.captureStackTrace(this,e)};h.prototype=Object.create(Error.prototype,{constructor:{value:h,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var d=t.SchemaContext=function(e,t,n,r,i){this.schema=e,this.options=t,this.propertyPath=n,this.base=r,this.schemas=i};d.prototype.resolve=function(e){return u.resolve(this.base,e)},d.prototype.makeChild=function(e,t){var n=void 0===t?this.propertyPath:this.propertyPath+m(t),r=u.resolve(this.base,e.id||""),i=new d(e,this.options,n,r,Object.create(this.schemas));return e.id&&!i.schemas[r]&&(i.schemas[r]=e),i};var p=t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};p.regexp=p.regex,p.pattern=p.regex,p.ipv4=p["ip-address"],t.isFormat=function(e,t,n){if("string"==typeof e&&void 0!==p[t]){if(p[t]instanceof RegExp)return p[t].test(e);if("function"==typeof p[t])return p[t](e)}else if(n&&n.customFormats&&"function"==typeof n.customFormats[t])return n.customFormats[t](e);return!0};var m=t.makeSuffix=function(e){return e=e.toString(),e.match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};t.deepCompareStrict=function e(t,n){if(typeof t!=typeof n)return!1;if(t instanceof Array)return n instanceof Array&&(t.length===n.length&&t.every(function(r,i){return e(t[i],n[i])}));if("object"==typeof t){if(!t||!n)return t===n;var r=Object.keys(t),i=Object.keys(n);return r.length===i.length&&r.every(function(r){return e(t[r],n[r])})}return t===n},e.exports.deepMerge=s,t.objectGetPath=function(e,t){for(var n,r=t.split("/").slice(1);"string"==typeof(n=r.shift());){var i=decodeURIComponent(n.replace(/~0/,"~").replace(/~1/g,"/"));if(!(i in e))return;e=e[i]}return e},t.encodePath=function(e){return e.map(c).join("")},t.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var n=e.toString().split("e");if(2===n.length){if("-"!==n[1][0])return t;t=Number(n[1].slice(1))}var r=n[0].split(".");return 2===r.length&&(t+=r[1].length),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxTransport=t.WebsocketTransport=t.DisconnectReason=t.TransportType=void 0;var r=n(125),i=n(126),o=n(131);t.TransportType=r.TransportType,t.DisconnectReason=r.DisconnectReason,t.WebsocketTransport=i.WebsocketTransport,t.AjaxTransport=o.AjaxTransport},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=new i.default("liveserv")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationHandler=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(45),u=n(27),l=n(4),f=n(26),h=n(17);t.NotificationHandler=function(e){function t(){var e;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.commonUI_=null,n.game_=null,n.gameStateController_=null,n.noteQueue_=[],n.outstandingNotification_=null,e=u.SingletonBase.call(n),i(n,e)}return o(t,e),s(t,[{key:"init",value:function(e){this.commonUI_=e,this.noteQueue_=[],this.outstandingNotification_=null,this.gameStateController_=new f.GameStateController}},{key:"setGame",value:function(e){this.game_=e}},{key:"handleNotification",value:function(e){if(e&&(e.isUnique()&&this.handleUniqueNotification_(e),this.queueNotification_(e)),this.commonUI_&&!this.outstandingNotification_){var t=this.noteQueue_.shift();if(t){if(l.GCMNotification.ASAP.indexOf(t.type)>=0)this.handleAlertNotification_(t);else if(t.type==l.GCMNotification.TYPE.SESSION_TIMER){var n=t.body[l.GCMNotification.SESSION_TIMER.DURATION];this.commonUI_.handleSessionDurationUpdate(n),this.continueHandlePendingNotifications_()}else if(t.type==l.GCMNotification.TYPE.BONUS_BAR){var r=t.body[l.GCMNotification.BONUS_BAR.PERCENT];this.commonUI_.handleBonusBarUpdate(r),this.continueHandlePendingNotifications_()}else this.gameStateController_.isGameIdle()?this.handleAlertNotification_(t):this.noteQueue_.unshift(t)}}}},{key:"hasPendingNotification",value:function(){return this.noteQueue_.length>0}},{key:"resume",value:function(e){try{this.outstandingNotification_&&this.outstandingNotification_.invokeCallback(e)}catch(e){throw e}finally{this.outstandingNotification_=null,this.gameStateController_.notifyCommonUIEnd(),this.continueHandlePendingNotifications_()}}},{key:"continueHandlePendingNotifications_",value:function(){this.hasPendingNotification()?this.handleNotification():this.dispatchEvent(new h.GCMEvent(h.GCMEvent.COMPLETE))}},{key:"handleAlertNotification_",value:function(e){this.outstandingNotification_=e,this.gameStateController_.notifyCommonUIStart();var t=e.body[l.GCMNotification.TIMEOUT];if(e.type==l.GCMNotification.TYPE.ERROR){var n=e.body[l.GCMNotification.ERROR.CATEGORY],r=e.body[l.GCMNotification.ERROR.SEVERITY],i=e.body[l.GCMNotification.ERROR.CODE],o=e.body[l.GCMNotification.ERROR.MESSAGE],a=e.body[l.GCMNotification.ERROR.PARAMS];this.commonUI_.handleError(n,r,i,o,a,t)}else if(e.type==l.GCMNotification.TYPE.SESSION_STATS){var s=e.body[l.GCMNotification.SESSION_STATS.STAKES],c=e.body[l.GCMNotification.SESSION_STATS.WINNINGS],u=e.body[l.GCMNotification.SESSION_STATS.TURNOVER];this.commonUI_.handleSessionStats(s,c,u,t)}else if(e.type==l.GCMNotification.TYPE.BONUS_BAR_FILLED)this.commonUI_.handleBonusBarFilled(t);else if(e.type==l.GCMNotification.TYPE.FREEBET_REWARD){var f=e.body[l.GCMNotification.FREEBET.AMOUNT];this.commonUI_.handleFreebetAward(f,t)}else if(e.type==l.GCMNotification.TYPE.GENERIC_MESSAGE)this.commonUI_.handleMessageTrigger(e.body);else if(e.type==l.GCMNotification.TYPE.GS_MESSAGE)this.commonUI_.handleGSTrigger(e.body);else if(e.type===l.GCMNotification.TYPE.COMMONUI_FREEROUNDS_AWARD)this.commonUI_.handleFreeRoundsAward(e.body);else if(e.type===l.GCMNotification.TYPE.COMMONUI_FREEROUNDS_IN_PROGRESS)this.commonUI_.handleFreeRoundsInProgress(e.body);else if(e.type===l.GCMNotification.TYPE.COMMONUI_FREEROUNDS_UPDATE)this.commonUI_.handleFreeRoundsUpdate(e.body);else if(e.type===l.GCMNotification.TYPE.GAME_FREEROUNDS_UPDATE)this.game_.handleFreeRoundsUpdate(e.body);else if(e.type===l.GCMNotification.TYPE.SYNDICATED_JACKPOT_WIN_AWARD)this.commonUI_.showSyndicateJackpotWinAward(e.body);else{if(e.type!==l.GCMNotification.TYPE.SYNDICATED_JACKPOT_PROGRESS_BAR)throw this.outstandingNotification_=null,Error("NotificationHandler.handleNotification: Unknown notification type ["+e.type+"].");this.commonUI_.showSyndicateJackpotProgressBar(e.body)}}},{key:"disposeNotification",value:function(e){if(e.type!==l.GCMNotification.TYPE.SYNDICATED_JACKPOT_PROGRESS_BAR)throw Error("NotificationHandler.disposeNotification: Unknown notification type ["+e.type+"].");this.commonUI_.disposeSyndicateJackpotProgressBar(e.body)}},{key:"handleUniqueNotification_",value:function(e){if(e.isUnique())for(var t=0;t<this.noteQueue_.length;++t){var n=this.noteQueue_[t];n.isUnique()&&n.type==e.type&&(this.noteQueue_.splice(t,1),t--)}}},{key:"queueNotification_",value:function(e){if(e.type==l.GCMNotification.TYPE.ERROR)if(this.noteQueue_.length>0){for(var t=0;t<this.noteQueue_.length;++t){var n=this.noteQueue_[t];if(n.type!=l.GCMNotification.TYPE.ERROR)break}this.noteQueue_.splice(index,0,e)}else this.noteQueue_.push(e);else this.noteQueue_.push(e)}}]),t}(c.EventDispatcher)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=["getOGSParams","loadCommonUI","commonUIReady","commonUIResize","gameRevealed","reload","redirect","showCommonUI","hideCommonUI","launcherLoaded"],c=["configure","launcherResized","registerService","commonUIReady","commonUIResize","gameRevealed","optionHasChanged","resume","reload","redirect","showCommonUI","hideCommonUI","isGameIdle","balancesUpdate","setOGSParams","gsPlayerAction","syndicateJackpotWinAwardDialogClosed"],u=["stakeUpdate","paidUpdate","balancesUpdate","loadProgressUpdate","gameReady","configReady","gameAnimationStart","gameAnimationComplete","gameIdle","handleError","handleSessionDurationUpdate","regOption","optionHasChanged","handleSessionStats","gameResized","gameHasLoadingScreen","handleMessageTrigger","handleGSTrigger","handleFreeRoundsAward","handleFreeRoundsInProgress","handleFreeRoundsUpdate","pollJackpots","showSyndicateJackpotWinAward","showSyndicateJackpotProgressBar","disposeSyndicateJackpotProgressBar"];t.Validate=function(){function e(){r(this,e)}return a(e,null,[{key:"isBalances",value:function(e,t){if(!e)return!1;if("object"!==o(e.CASH))return!1;for(var n in e)if("number"!=typeof e[n].amount)return!1;if(t&&"FREESPIN"==t){if("object"!==o(e.FREESPIN))return!1}else if("object"==o(e.FREESPIN))return!1;return!0}},{key:"isErrorInfo",value:function(e){return!!e&&!(void 0===e.errorCode||void 0===e.errorMessage)}},{key:"isValidCurrencyOps",value:function(e){if(!e)return!1;var t=/^[\D]$/,n=/^[\D]*$/;return t.test(e.ccy_thousand_separator)&&t.test(e.ccy_decimal_separator)&&n.test(e.ccy_code)}},{key:"isNumericValue",value:function(e){return"number"==typeof e&&!isNaN(parseFloat(e))&&isFinite(e)}},{key:"isIntegerValue",value:function(e){return"number"==typeof e&&!isNaN(parseInt(e,10))&&parseInt(e,10)==e&&isFinite(e)}},{key:"isPercentValue",value:function(e){return!!this.isNumericValue(e)&&(parseFloat(e)<=100&&!(parseFloat(e)<0))}},{key:"isHeight",value:function(e){return/^\d+(\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)/.test(e)}},{key:"isAlphaNumeric",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9]+$/.test(e)}},{key:"isValidGameName",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9\-_]+$/.test(e)}},{key:"isValidLanguage",value:function(e){if("string"!=typeof e)return!1;var t=e.split("-"),n=/^[a-z]{2}$/;if(1===t.length)return n.test(t[0]);if(2===t.length){var r=/^[A-Z]{2}$/;return n.test(t[0])&&r.test(t[1])}return!1}},{key:"isSingleLetter",value:function(e){return/^[a-zA-Z]$/.test(e)}},{key:"isSingleDigit",value:function(e){return/^[0-9]$/.test(e)}},{key:"isEnumOption",value:function(e,t){var n=!1;for(var r in e)if(t===e[r]){n=!0;break}return n}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isDefinedAndNotNull",value:function(e){return void 0!==e&&null!==e&&""!=e}},{key:"isElement",value:function(e){return Boolean(e&&"function"==typeof e.appendChild)}},{key:"isValidCommonUIMethod",value:function(e){return-1!=u.indexOf(e)}},{key:"isValidGCMMethod",value:function(e){return-1!=c.indexOf(e)}},{key:"isValidGCMLauncherMethod",value:function(e){return-1!=s.indexOf(e)}},{key:"isValidBoolean",value:function(e){return"boolean"==typeof e}}]),e}()},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){return function(t){var n=e,r=n.lib,i=r.Base,o=r.WordArray,a=n.x64={};a.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.MessageBuilder=void 0;var r=n(127),i=n(128),o=new r.MessageBuilder,a=new i.Parser;t.MessageBuilder=o,t.Parser=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e)};t.default=i,i.Patterns={Channel32Pattern:/^[A-Za-z0-9_\-=]{32}$/,Channel16Pattern:/^[A-Za-z0-9_]{16}$/,Channel16PaddedPattern:/^[A-Za-z0-9_]{6}={16}[A-Za-z0-9_]{10}$/,SubjectPattern:/^[A-Za-z0-9_]{16}$/,UUIDHexPattern:/^[A-Za-z0-9]{8}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{4}-[A-Za-z0-9]{12}$/,UUIDBase64Pattern:/^[A-Za-z0-9_\-]{22}==$/},i.Size={Channel32Id:32,Channel16Id:16,SubjectId:16,MessageId:10,MessageLength:6,PingId:4,ProtocolVersion:2,AuthSize:4,UserId:10,UserUUID:24},i.Base64Table=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"],i.HexMap={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,a:10,B:11,b:11,C:12,c:12,D:13,d:13,E:14,e:14,F:15,f:15}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.MESSAGE="MESSAGE",e.ERROR="ERROR"}(r||(r={})),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={ERROR:"ERROR",SESSION_TIMER:"SESSION_TIMER",SESSION_STATS:"SESSION_STATS",BONUS_BAR:"BONUS_BAR",BONUS_BAR_FILLED:"BONUS_BAR_FILLED",FREEBET_REWARD:"FREEBET_REWARD"};t.GCMEvent=function(){function e(t,n){r(this,e),this.name=t,this.body=n,this.target=null}return i(e,null,[{key:"TYPE",get:function(){return o}},{key:"COMPLETE",get:function(){return"complete"}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return"undefined"==typeof document||a.test(document.cookie)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=new RegExp("(^|; )OpenbetLogger=([^;]*)"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";r(this,e),this.prefix=t,this.enabled=!1;var n=console&&console.log?console.log:void 0;this.logger={error:{scope:console,func:console&&console.error?console.error:n},warn:{scope:console,func:console&&console.warn?console.warn:n},info:{scope:console,func:console&&console.info?console.info:n}},this.enabled=i()}return o(e,[{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log("error",t)}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log("warn",t)}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log("info",t)}},{key:"_log",value:function(e,t){if(this.enabled||window.OpenbetLogger){var n=this.logger[e],r=n.scope,i=n.func;r&&i&&(t[0]=this.prefix+" :: "+t[0],i.apply(r,t))}}}]),e}();t.default=s},function(e,t,n){"use strict";var r=e.exports.Validator=n(52);e.exports.ValidatorResult=n(7).ValidatorResult,e.exports.ValidationError=n(7).ValidationError,e.exports.SchemaError=n(7).SchemaError,e.exports.validate=function(e,t,n){return(new r).validate(e,t,n)}},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){return function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,o=t.algo,a=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var l=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=l<<1|l>>>31}var f=(r<<5|r>>>27)+c+a[u];f+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,c=s,s=o,o=i<<30|i>>>2,i=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1})},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){!function(){var t=e,n=t.lib,r=n.Base,i=t.enc,o=i.Utf8,a=t.algo;a.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}()})},function(e,t,n){e.exports=n(102)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(2),o=n(105),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(38):void 0!==t&&(e=n(38)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){s.headers[e]={}}),i.forEach(["post","put","patch"],function(e){s.headers[e]=i.merge(a)}),e.exports=s}).call(t,n(24))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?p=d.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=p.length;t;){for(d=p,p=[];++g<t;)d&&d[g].run();g=-1,t=p.length}d=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(t,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.1
 */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(e){q=e}function a(e){V=e}function s(){return void 0!==W?function(){W(u)}:c()}function c(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;e<z;e+=2){(0,Z[e])(Z[e+1]),Z[e]=void 0,Z[e+1]=void 0}z=0}function l(e,t){var n=arguments,r=this,i=new this.constructor(h);void 0===i[ee]&&N(i);var o=r._state;return o?function(){var e=n[o-1];V(function(){return A(o,i,e,r._result)})}():w(r,i,e,t),i}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return S(n,e),n}function h(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ie.error=e,ie}}function g(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function v(e,t,n){V(function(e){var r=!1,i=g(n,t,function(n){r||(r=!0,t!==n?S(e,n):_(e,n))},function(t){r||(r=!0,O(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,O(e,i))},e)}function y(e,t){t._state===ne?_(e,t._result):t._state===re?O(e,t._result):w(t,void 0,function(t){return S(e,t)},function(t){return O(e,t)})}function E(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?y(e,t):n===ie?(O(e,ie.error),ie.error=null):void 0===n?_(e,t):i(n)?v(e,t,n):_(e,t)}function S(t,n){t===n?O(t,d()):e(n)?E(t,n,m(n)):_(t,n)}function b(e){e._onerror&&e._onerror(e._result),C(e)}function _(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&V(C,e))}function O(e,t){e._state===te&&(e._state=re,e._result=t,V(b,e))}function w(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=n,i[o+re]=r,0===o&&e._state&&V(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?A(n,r,i,o):i(o);e._subscribers.length=0}}function I(){this.error=null}function T(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function A(e,t,n,r){var o=i(n),a=void 0,s=void 0,c=void 0,u=void 0;if(o){if(a=T(n,r),a===oe?(u=!0,s=a.error,a.error=null):c=!0,t===a)return void O(t,p())}else a=r,c=!0;t._state!==te||(o&&c?S(t,a):u?O(t,s):e===ne?_(t,a):e===re&&O(t,a))}function R(e,t){try{t(function(t){S(e,t)},function(t){O(e,t)})}catch(t){O(e,t)}}function k(){return ae++}function N(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function P(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[ee]||N(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&_(this.promise,this._result))):O(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function U(e){return new P(this,e).promise}function x(e){var t=this;return new t(H(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function D(e){var t=this,n=new t(h);return O(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this[ee]=k(),this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&B(),this instanceof G?R(this,e):L())}function j(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=G}var F=void 0;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=F,z=0,W=void 0,q=void 0,V=function(e,t){Z[z]=e,Z[z+1]=t,2===(z+=2)&&(q?q(u):Q())},J="undefined"!=typeof window?window:void 0,Y=J||{},$=Y.MutationObserver||Y.WebKitMutationObserver,K="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),Q=void 0;Q=K?function(){return function(){return t.nextTick(u)}}():$?function(){var e=0,t=new $(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():X?function(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}():void 0===J?function(){try{var e=n(136);return W=e.runOnLoop||e.runOnContext,s()}catch(e){return c()}}():c();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new I,oe=new I,ae=0;return P.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},P.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=m(e);if(i===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===G){var o=new n(h);E(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},P.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?O(r,n):this._result[t]=n),0===this._remaining&&_(r,this._result)},P.prototype._willSettleAt=function(e,t){var n=this;w(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},G.all=U,G.race=x,G.resolve=f,G.reject=D,G._setScheduler=o,G._setAsap=a,G._asap=V,G.prototype={constructor:G,then:l,catch:function(e){return this.then(null,e)}},G.polyfill=j,G.Promise=G,G})}).call(t,n(24),n(12))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GameStateController=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(27),a=n(10),s=n(11),c=n(17);(t.GameStateController=function(){function e(){return r(this,e),this.gameResumeCallback_=null,this.playState_=e.STATE.IDLE,this.commonUI_=null,this.notificationHandler_=null,o.SingletonBase.call(this)}return i(e,[{key:"init",value:function(e){this.commonUI_=e,this.notificationHandler_=new a.NotificationHandler}},{key:"gameAnimationStart",value:function(){this.playState_=e.STATE.GAME_ANIMATING,this.commonUI_&&this.commonUI_.gameAnimationStart()}},{key:"gameAnimationComplete",value:function(t){if(!s.Validate.isFunction(t))throw new Error("gcm.gameAnimationComplete: Invalid callback function");this.gameResumeCallback_=t,this.playState_=e.STATE.IDLE,this.notificationHandler_.hasPendingNotification()?(this.notificationHandler_.addEventListener(c.GCMEvent.COMPLETE,this.onNotificationHandleComplete_,this),this.notificationHandler_.handleNotification()):this.commonUI_&&this.commonUI_.gameAnimationComplete()}},{key:"notifyCommonUIStart",value:function(){this.playState_=e.STATE.COMMONUI_NOTIFY}},{key:"notifyCommonUIEnd",value:function(){this.playState_=e.STATE.IDLE}},{key:"isGameIdle",value:function(){return this.playState_==e.STATE.IDLE}},{key:"onNotificationHandleComplete_",value:function(){this.notificationHandler_.removeEventListener(c.GCMEvent.COMPLETE,this.onNotificationHandleComplete_,this),this.commonUI_&&this.commonUI_.gameAnimationComplete()}}]),e}()).STATE={COMMONUI_NOTIFY:"COMMONUI_NOTIFY",GAME_ANIMATING:"GAME_ANIMATING",IDLE:"IDLE"}},function(e,t,n){"use strict";function r(){return this.constructor.instance||(this.constructor.instance=this),this.constructor.instance}Object.defineProperty(t,"__esModule",{value:!0}),t.SingletonBase=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorNotification=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4);t.ErrorNotification=function(e){function t(e,n,o,a,s){r(this,t);var u={errorCategory:e,errorSeverity:n,errorCode:o,errorMessage:a,errorParams:s};return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.GCMNotification.TYPE.ERROR,u,t.setErrorParamIndex))}return o(t,e),s(t,null,[{key:"setErrorParamIndex",value:function(e){t.gameErrorParamIndex=e}},{key:"getErrorParamIndex",value:function(){return t.gameErrorParamIndex}}]),t}(c.GCMNotification)},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&u.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return u.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var c=n(53),u=n(55);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=r;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),m=["'"].concat(p),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=n(56);r.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var f=h.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?O.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=l.exec(s);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,s=s.substr(d.length)}if(n||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===s.substr(0,2);!w||d&&b[d]||(s=s.substr(2),this.slashes=!0)}if(!b[d]&&(w||d&&!_[d])){for(var C=-1,I=0;I<v.length;I++){var T=s.indexOf(v[I]);-1!==T&&(-1===C||T<C)&&(C=T)}var A,R;R=-1===C?s.lastIndexOf("@"):s.lastIndexOf("@",C),-1!==R&&(A=s.slice(0,R),s=s.slice(R+1),this.auth=decodeURIComponent(A)),C=-1;for(var I=0;I<g.length;I++){var T=s.indexOf(g[I]);-1!==T&&(-1===C||T<C)&&(C=T)}-1===C&&(C=s.length),this.host=s.slice(0,C),s=s.slice(C),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var N=this.hostname.split(/\./),I=0,P=N.length;I<P;I++){var M=N[I];if(M&&!M.match(y)){for(var U="",x=0,D=M.length;x<D;x++)M.charCodeAt(x)>127?U+="x":U+=M[x];if(!U.match(y)){var B=N.slice(0,I),L=N.slice(I+1),G=M.match(E);G&&(B.push(G[1]),L.unshift(G[2])),L.length&&(s="/"+L.join(".")+s),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=c.toASCII(this.hostname));var j=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+j,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!S[p])for(var I=0,P=m.length;I<P;I++){var H=m[I];if(-1!==s.indexOf(H)){var z=encodeURIComponent(H);z===H&&(z=escape(H)),s=s.split(H).join(z)}}var W=s.indexOf("#");-1!==W&&(this.hash=s.substr(W),s=s.slice(0,W));var q=s.indexOf("?");if(-1!==q?(this.search=s.substr(q),this.query=s.substr(q+1),t&&(this.query=O.parse(this.query)),s=s.slice(0,q)):t&&(this.search="",this.query={}),s&&(this.pathname=s),_[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",V=this.search||"";this.path=j+V}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=O.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),c=0;c<s.length;c++){var l=s[c];"protocol"!==l&&(n[l]=e[l])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||b[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=y||v||n.host&&e.pathname,S=E,O=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],w=n.protocol&&!_[n.protocol];if(w&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),E=E&&(""===p[0]||""===O[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,O=p;else if(p.length)O||(O=[]),O.pop(),O=O.concat(p),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(w){n.hostname=n.host=O.shift();var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var I=O.slice(-1)[0],T=(n.host||e.host||O.length>1)&&("."===I||".."===I)||""===I,A=0,R=O.length;R>=0;R--)I=O[R],"."===I?O.splice(R,1):".."===I?(O.splice(R,1),A++):A&&(O.splice(R,1),A--);if(!E&&!S)for(;A--;A)O.unshift("..");!E||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),T&&"/"!==O.join("/").substr(-1)&&O.push("");var k=""===O[0]||O[0]&&"/"===O[0].charAt(0);if(w){n.hostname=n.host=k?"":O.length?O.shift():"";var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return E=E||n.host&&O.length,E&&!k&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.FreeRound=function e(t,n,i,o,a,s,c){r(this,e),this.CAMPAIGNID=t,this.ACTIVATIONID=n,this.ENDDATE=i,this.TOTALWIN=o,this.CAMPAIGNVALUE=a,this.REJECTABLE=s,this.OPTIONS=new Array;for(var u=0;u<c.length;u++){var l={};l.BETLEVEL=c[u].BETLEVEL,l.FEATURE=c[u].FEATURE,l.REMAININGROUNDS=c[u].REMAININGROUNDS,l.TOTALROUNDS=c[u].TOTALROUNDS,this.OPTIONS.push(l)}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(19),a=function(){function e(t){r(this,e),this.messageNode=t,this.MESSAGE={},this.validator=new o.Validator}return i(e,[{key:"getMessageFromXml",value:function(){throw new Error("Abstract function getMessageFromXml is not implemented")}},{key:"setMessage",value:function(e){this.validateMessage(e),this.MESSAGE=e}},{key:"validateMessage",value:function(e){throw new Error("Abstract function validateMessage with paramter message="+e+" is not implemented")}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){var t=!1;if(Object.keys(i).forEach(function(n){i[n]===e&&(t=!0)}),!t)throw new Error('Invalid message type (Message Id: "'+e+'"')}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidMessageType=r;var i=t.SupportedMessageTypes={RC:"100",CMA:"101"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(75),o=r(i),a=n(34),s=r(a);o.default.prototype.handshake=function(e){if(e.nonce){var t;this.options.onNonce?this.options.onNonce(e.nonce):this.options.secret&&(t=s.default.enc.Base64.stringify(s.default.HmacSHA256(e.nonce,this.options.secret)),this.sendAuthConnectWithHmac(t))}else e.sessionId&&this.handshakeSessionId(e.sessionId)},o.default.prototype.handshakeSessionId=function(e){this.sessionId=e,this.initialised=!0,this.options.onInit&&this.options.onInit(),this.keepAliveInterval=window.setInterval(this.keepAlive.bind(this),3e4)},o.default.prototype.sendAuthConnectWithHmac=function(e){var t={"@class":".AuthenticatedConnectRequest",hmac:e};this.authToken&&(t.authToken=this.authToken),this.sessionId&&(t.sessionId=this.sessionId);var n=this.getBrowserData();t.platform=n.browser,t.os=n.operatingSystem,this.webSocketSend(t)},t.default=o.default},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(13),n(76),n(77),n(5),n(6),n(20),n(35),n(78),n(36),n(79),n(80),n(81),n(21),n(82),n(3),n(1),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98))}(0,function(e){return e})},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],c=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)(function(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0})(n)&&(r<8&&(s[r]=e(t.pow(n,.5))),c[r]=e(t.pow(n,1/3)),r++),n++}();var u=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],f=n[6],h=n[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var p=u[d-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[d-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[d]=m+u[d-7]+v+u[d-16]}var y=s&l^~s&f,E=r&i^r&o^i&o,S=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),_=h+b+y+c[d]+u[d],O=S+E;h=f,f=l,l=s,s=a+_|0,a=o,o=i,i=r,r=_+O|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(l),n.HmacSHA256=o._createHmacHelper(l)}(Math),e.SHA256})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(13))}(0,function(e){return function(){function t(){return a.create.apply(a,arguments)}var n=e,r=n.lib,i=r.Hasher,o=n.x64,a=o.Word,s=o.WordArray,c=n.algo,u=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=t()}();var f=c.SHA512=i.extend({_doReset:function(){this._hash=new s.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],f=n[6],h=n[7],d=r.high,p=r.low,m=i.high,g=i.low,v=o.high,y=o.low,E=a.high,S=a.low,b=s.high,_=s.low,O=c.high,w=c.low,C=f.high,I=f.low,T=h.high,A=h.low,R=d,k=p,N=m,P=g,M=v,U=y,x=E,D=S,B=b,L=_,G=O,j=w,F=C,H=I,z=T,W=A,q=0;q<80;q++){var V=l[q];if(q<16)var J=V.high=0|e[t+2*q],Y=V.low=0|e[t+2*q+1];else{var $=l[q-15],K=$.high,X=$.low,Z=(K>>>1|X<<31)^(K>>>8|X<<24)^K>>>7,Q=(X>>>1|K<<31)^(X>>>8|K<<24)^(X>>>7|K<<25),ee=l[q-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=l[q-7],ae=oe.high,se=oe.low,ce=l[q-16],ue=ce.high,le=ce.low,Y=Q+se,J=Z+ae+(Y>>>0<Q>>>0?1:0),Y=Y+ie,J=J+re+(Y>>>0<ie>>>0?1:0),Y=Y+le,J=J+ue+(Y>>>0<le>>>0?1:0);V.high=J,V.low=Y}var fe=B&G^~B&F,he=L&j^~L&H,de=R&N^R&M^N&M,pe=k&P^k&U^P&U,me=(R>>>28|k<<4)^(R<<30|k>>>2)^(R<<25|k>>>7),ge=(k>>>28|R<<4)^(k<<30|R>>>2)^(k<<25|R>>>7),ve=(B>>>14|L<<18)^(B>>>18|L<<14)^(B<<23|L>>>9),ye=(L>>>14|B<<18)^(L>>>18|B<<14)^(L<<23|B>>>9),Ee=u[q],Se=Ee.high,be=Ee.low,_e=W+ye,Oe=z+ve+(_e>>>0<W>>>0?1:0),_e=_e+he,Oe=Oe+fe+(_e>>>0<he>>>0?1:0),_e=_e+be,Oe=Oe+Se+(_e>>>0<be>>>0?1:0),_e=_e+Y,Oe=Oe+J+(_e>>>0<Y>>>0?1:0),we=ge+pe,Ce=me+de+(we>>>0<ge>>>0?1:0);z=F,W=H,F=G,H=j,G=B,j=L,L=D+_e|0,B=x+Oe+(L>>>0<D>>>0?1:0)|0,x=M,D=U,M=N,U=P,N=R,P=k,k=_e+we|0,R=Oe+Ce+(k>>>0<_e>>>0?1:0)|0}p=r.low=p+k,r.high=d+R+(p>>>0<k>>>0?1:0),g=i.low=g+P,i.high=m+N+(g>>>0<P>>>0?1:0),y=o.low=y+U,o.high=v+M+(y>>>0<U>>>0?1:0),S=a.low=S+D,a.high=E+x+(S>>>0<D>>>0?1:0),_=s.low=_+L,s.high=b+B+(_>>>0<L>>>0?1:0),w=c.low=w+j,c.high=O+G+(w>>>0<j>>>0?1:0),I=f.low=I+H,f.high=C+F+(I>>>0<H>>>0?1:0),A=h.low=A+W,h.high=T+z+(A>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});n.SHA512=i._createHelper(f),n.HmacSHA512=i._createHmacHelper(f)}(),e.SHA512})},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(2),i=n(106),o=n(108),a=n(109),s=n(110),c=n(39),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(111);e.exports=function(e){return new Promise(function(l,f){var h=e.data,d=e.headers;r.isFormData(h)&&delete d["Content-Type"];var p=new XMLHttpRequest,m="onreadystatechange",g=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(e.url)||(p=new window.XDomainRequest,m="onload",g=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var v=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+u(v+":"+y)}if(p.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[m]=function(){if(p&&(4===p.readyState||g)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,n=e.responseType&&"text"!==e.responseType?p.response:p.responseText,r={data:n,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:t,config:e,request:p};i(l,f,r),p=null}},p.onerror=function(){f(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){f(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var E=n(112),S=(e.withCredentials||s(e.url))&&e.xsrfCookieName?E.read(e.xsrfCookieName):void 0;S&&(d[e.xsrfHeaderName]=S)}if("setRequestHeader"in p&&r.forEach(d,function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===h&&(h=null),p.send(h)})}}).call(t,n(24))},function(e,t,n){"use strict";var r=n(107);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){return a.default.Patterns.Channel32Pattern.test(e)||a.default.Patterns.Channel16Pattern.test(e)}function i(e){return a.default.Patterns.SubjectPattern.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.validateChannel=r,t.validateSubject=i;var o=n(15),a=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){e.exports=n(44)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.GcmCore=void 0;var a="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(26),u=n(46),l=n(48),f=n(11),h=n(10),d=n(28),p=n(17),m=n(49),g=n(4),v=n(50),y=n(64),E=n(73),S=n(74),b=n(120);n(135);var _=n(25),O=n(22),w=r(O),C=n(137),I=r(C),T=n(18),A=r(T),R=n(139),k=r(R);t.GcmCore=function(){function e(){i(this,e),this.account={},this.ccyFormatter=null,this.game,this.gameConfig={},this.commonUI=null,this.widgetUIAdaptor=null,this.operator=null,this.launcherOrigin=null,this.launcherHostName=null,this.commonUIOrigin=null,this.ogsParams=null,this.analyticsEnabled=!1,this.isGameReady=!1,this.isAccountInit=!1,this.gameStateController_=new c.GameStateController,this.notificationHandler_=new h.NotificationHandler,this.errorHandler_=new u.ErrorHandler,this.gameSparksHandler_=new S.GameSparksHandler,this.gameInfo=new l.GameInfo,this.ogsClient=new k.default,this.liveServHandler=new b.LiveServHandler,this.launcherWindow=window.parent,this.messageTrigger=new y.MessageTrigger,this.promotionsEnabled=!1,this.promotions=new v.Promotions(this.notificationHandler_),this.playerCurrency=null,this.latestActiveJackpotIdentifiers=[],this.latestJackpotBalances=[],this.timer=null,this.syndicateJackpotWinAwardDialogIsOpen=!1,this._logger={integration:new A.default("GCM Int"),debug:new A.default("GCM Debug")}}return s(e,[{key:"init",value:function(e,t,n){this._logger.integration.info("GCM.init(\n\tgameObj:",e,"\n\tgcmUrlString:",t,"\n\tgameUrlString:",n,"\n)");var r=new URL(t);""!=n&&void 0!=n?this.gameUrl=n:this._logger.debug.warn("init: parameter gameUrlString is missing"),this.device=E.UrlUtil.getSearchParameterByName("device",this.gameUrl),void 0!=this.device&&null!=this.device&&"mobile"==this.device||(this.device="desktop"),this.launcherOrigin=r.origin,this.launcherHostName=r.hostname,this.game=e,addEventListener("message",this.postMessageEventListener.bind(this),!1);var i="desktop"==this.device;if(i){var o={};o.singlePostMsgArg=!0,this.sendPostMessageToGCMLauncher("getOGSParams",o)}else this.ogsParams=this.getOGSParams(this.gameUrl,i),this.resumeInit()}},{key:"resumeInit",value:function(){this.game.getConfig&&this.game.getConfig&&(null==this.ogsParams||void 0==this.ogsParams?(this._logger.integration.info("GAME.getConfig()"),this.gameConfig=this.game.getConfig(),this._logger.integration.info("gameConfig:\n\t",this.gameConfig)):(this._logger.integration.info("GAME.getConfig()"),this.gameConfig=this.game.getConfig(this.ogsParams),this._logger.integration.info("gameConfig:\n\t",this.gameConfig))),this.gameConfig.gameUrl=this.gameUrl,"mobile"==this.device?(addEventListener("resize",this.gameResized.bind(this),!1),this.loadLauncher(this.launcherOrigin,this.gameConfig)):this.loadCommonUI()}},{key:"setOGSParams",value:function(e){this.ogsParams=e,this.resumeInit()}},{key:"configure",value:function(e,t,n,r,i,o,a){var s=this,c=t.operatorPostMessageLibraryUrl;if(void 0!=c){this.addServiceScript(c).then(function(e){return s._logger.debug.info("Operator post msg library script loaded")},function(e){throw new Error("Failed to load Operator post msg library: ",e)})}this.commonUIHostName=e,this.ogsParams=t,this.gcmConfiguration=n,this.gsConfiguration=r,this.jqConfiguration=i,this.ogsClientConfiguration=o,this.lsConfiguration=a;var u=this.getGCMConfiguration("gameoption");if(u&&u.MUTE&&this.gameInfo.setDefaultOption("MUTE",u.MUTE),"mobile"==this.ogsParams.device&&this.launcherReady(),this.ogsParams.cmaScriptUrl){this.addServiceScript(this.ogsParams.cmaScriptUrl).then(function(e){return s._logger.debug.info("cma bridge script loaded")},function(e){throw new Error("Failed to cma load bridge script: ",e)})}}},{key:"loadCommonUI",value:function(){this.sendPostMessageToGCMLauncher("loadCommonUI",this.gameConfig)}},{key:"swedishRegulationParametersExist",value:function(){var e=this;return["selfexclusion_url","selfassessment_url","depositlimit_url"].every(function(t){return e.ogsParams[t]})}},{key:"loadExternalSwedishPanel",value:function(e){var t=this,n=document.createElement("div");n.setAttribute("id","externalPanelContent"),n.style.left="0",n.style.top="50%",n.style.transform="translateY(-50%)",n.style.position="fixed",n.style.zIndex=10001,document.body.appendChild(n);var r=document.createElement("div");r.style.height="20px",r.style.backgroundColor="transparent",r.style.position="absolute",r.style.top="0",r.style.width="100%",n.appendChild(r);var i=e+"/gcm/gcm-externalPanel/externalPanel.html",o=document.createElement("iframe");o.setAttribute("src",i),o.setAttribute("id","externalPanelIframe"),o.setAttribute("name","SwedishPanel"),o.style.border="none",o.style.width="70px",o.style.height="100px",o.style.overflow="hidden",o.style.borderRadius="8px 8px 0px 0px",o.style.border="none",o.style.WebkitTransform="none",o.style.transform="none";var a=["selfassessment_url","selfexclusion_url","depositlimit_url"].map(function(e){return{id:e.replace("_url",""),url:t.ogsParams[e]}});o.onload=function(){o.contentWindow.postMessage({action:"init",type:"swedishRegulationPanel",params:{swedishButtons:a,isDraggable:!0}},e)},n.appendChild(o),this.makeDraggable(n,r)}},{key:"makeDraggable",value:function(e,t){var n=!0;t||(t=e),t.addEventListener("touchstart",function(r){var i=parseInt(r.touches[0].pageX),o=parseInt(r.touches[0].pageY),a=i-parseInt(e.style.left),s=o-parseInt(e.style.top);n&&(e.style.transform="translateY(0)",e.style.top=o+"px",n=!1),t.addEventListener("touchmove",function(t){t.preventDefault();var n=parseInt(t.touches[0].pageX),r=parseInt(t.touches[0].pageY);n-a>0&&n-a+e.offsetWidth<window.innerWidth&&(e.style.left=n-a+"px"),r-s>30&&r-s+e.offsetHeight<window.innerHeight&&(e.style.top=r-s+"px")}),t.addEventListener("touchend",function(e){t.unbind("touchmove"),t.unbind("touchend")})})}},{key:"checkExternalPanelPosition",value:function(e){if(document.getElementById("externalPanelContent")){var t=document.getElementById("externalPanelContent"),n=parseInt(t.style.left);parseInt(t.style.top)>window.innerHeight-t.offsetHeight&&(t.style.top=window.innerHeight-t.offsetHeight+"px"),n>window.innerWidth-t.offsetWidth&&(t.style.left=window.innerWidth-t.offsetWidth+"px")}}},{key:"loadLauncher",value:function(e,t){var n=e+"/gcm/gcm-launcher/launcher.html",r=document.createElement("iframe");this._logger.debug.info("ifrm_ "+r),r.onload=function(){var n={};n.action="launcherLoaded",n.params=t;var i=JSON.stringify(n);r.contentWindow.postMessage(i,e)},r.name="launcherFrame",r.id="launcherIFrame",r.style.borderStyle="none",r.style.background="transparent",r.setAttribute("background-color","transparent"),r.setAttribute("allowtransparency","true"),r.setAttribute("allow","geolocation"),r.style.top=0,r.style.left=0,r.style.width="100%",r.style.height="100%",r.style.position="fixed",r.style.zIndex=999,r.setAttribute("src",n),document.body.appendChild(r)}},{key:"launcherReady",value:function(){var e=document.getElementById("launcherIFrame");this.launcherWindow=e.contentWindow}},{key:"postMessageEventListener",value:function(e){if(this.isknownOrigin(e.origin)){var t=JSON.parse(e.data),n=t.action,r=null;f.Validate.isValidGCMMethod(n)?(t.params&&(r=Object.keys(t.params).map(function(e){return t.params[e]})),this._logger.debug.info("Received post message: action: "+n+", params: "+r),"commonUIReady"==n&&(this.commonUI=new m.CUIAdapter(this,e.source,e.origin)),this[n].apply(this,r)):this._logger.debug.warn("No permission to execute method "+n)}}},{key:"isknownOrigin",value:function(e){return-1!=e.indexOf(this.launcherHostName)||-1!=e.indexOf(this.commonUIHostName)}},{key:"commonUIReady",value:function(){this._logger.integration.info("GCM.commonUIReady()"),this.gameConfig&&this.gameConfig.gameLoadingScreen&&this.commonUI.gameHasLoadingScreen();var e=f.Validate.isDefinedAndNotNull(this.ogsParams.sessionid);this.commonUI.configReady(e),this.notificationHandler_.init(this.commonUI),this.gameInfo.setCommonUI(this.commonUI),this.gameStateController_.init(this.commonUI),this.sendPostMessageToGCMLauncher("commonUIReady",null),this.isGameReady&&this.commonUI.gameReady()}},{key:"commonUIResize",value:function(e,t,n,r,i){this._logger.integration.info("GCM.commonUIResize(\n\theight:",e,"\n\twidth:",t,"\n\toffsetX:",n,"\n\toffsetY:",r,"\n\treAdjust:",i,"\n)"),"desktop"==this.device?this.sendPostMessageToGCMLauncher("commonUIResize",arguments):this.commonUIResizeMobile(e,t,n,r)}},{key:"launcherResized",value:function(e,t){this.commonUI.gameResized(e,t)}},{key:"gameResized",value:function(e){this.commonUI.gameResized(window.innerWidth,window.innerHeight),this.checkExternalPanelPosition(e)}},{key:"commonUIResizeMobile",value:function(e,t,n,r){var i=document.getElementById("launcherIFrame");if(n&&r)i.style.height=e,i.style.width=t,i.style.left=n,i.style.top=r,i.style.marginLeft=0;else if(e&&(i.style.height=e),t){i.style.width=t;var o=i.offsetWidth;i.style.left="50%",i.style.marginLeft=-o/2+"px"}}},{key:"configReady",value:function(){this.setupAnalytics(this.ogsParams.gameName),this.promotions.setCcyFormatter(this.ccyFormatter),this.promotions.setEnabled(this.ogsParams.mode===this.gameInfo.PlayMode.REAL),this._logger.integration.info("GAME.gcmReady(\n\tgcm:",this,"\n)"),this.game.gcmReady(this),this.ogsParams.playMode=this.ogsParams.mode,this._logger.integration.info("GAME.configReady(\n\togsParams:",this.ogsParams,"\n)"),this.game.configReady(this.ogsParams)}},{key:"pollJackpots",value:function(e,t){this.playerCurrency=e,this.latestActiveJackpotIdentifiers=t,"function"==typeof this.game.jackpotBalancesUpdate&&function(e){var t=Object.keys(e.latestActiveJackpotIdentifiers).map(function(t){return"instance="+e.latestActiveJackpotIdentifiers[t]}).join("&");null!==e.playerCurrency&&(t+="&currency="+e.playerCurrency);var n=e.jqConfiguration.jqUrl+"?"+t;clearInterval(e.timer),e.timer=setInterval(function(){return e.jackpotsUpdate(n,e).then(function(t){200==t.status&&(t.data.hasOwnProperty("jackpots")?e.onJackpotsUpdateSuccess(t.data.jackpots):e._logger.debug.error("unrecognized response from service "+t.data))}).catch(function(t){e._logger.debug.warn("Jackpots update has been failed")})},e.jqConfiguration.interval||1e3)}(this)}},{key:"jackpotsUpdate",value:function(e,t){var n=this;return w.default.get(e).then(function(e){return n._logger.debug.info("response: "+JSON.stringify(e.data)),e}).catch(function(e){return t.onJackpotsUpdateFailed(e)})}},{key:"onJackpotsUpdateSuccess",value:function(e){this.latestJackpotBalances=e,"function"==typeof this.game.jackpotBalancesUpdate&&this.gameStateController_.isGameIdle()&&(this._logger.integration.info("GAME.jackpotBalancesUpdate(\n\tresponseData:",e,"\n)"),this.game.jackpotBalancesUpdate(e))}},{key:"onJackpotsUpdateFailed",value:function(e){this.latestJackpotBalances=[],"function"==typeof this.game.onJackpotsUpdateFailed&&(e.response.hasOwnProperty("data")?(this._logger.integration.info("GAME.onJackpotsUpdateFailed(\n\terrorMessage:",e.response.data,"\n)"),this.game.onJackpotsUpdateFailed(e.response.data)):this._logger.debug.error("jackpot query api response without error message: "+e.response.status))}},{key:"showJackpotMessageDialog",value:function(e){if(e&&e.type)switch(e.type){case"syndicatedWinCalculation":if(!this.syndicateJackpotWinAwardDialogIsOpen){var t=new g.GCMNotification(g.GCMNotification.TYPE.SYNDICATED_JACKPOT_PROGRESS_BAR,{timeout:1e4});this.notificationHandler_.handleNotification(t)}}}},{key:"syndicateJackpotWinAwardDialogClosed",value:function(){this.syndicateJackpotWinAwardDialogIsOpen=!1}},{key:"gameReady",value:function(){this._logger.integration.info("GCM.gameReady()"),this.isGameReady=!0,this.gameInfo.setGame(this.game),"mobile"==this.device&&this.swedishRegulationParametersExist()&&this.loadExternalSwedishPanel(this.launcherOrigin),this.notificationHandler_.setGame(this.game),this.commonUI&&this.commonUI.gameReady()}},{key:"gameRevealed",value:function(){this._logger.integration.info("GCM.gameRevealed()"),this.analyticsEnabled&&ga("send","timing","gameRevealed",this.ogsParams.gameName,Math.round(performance.now())),this.sendPostMessageToGCMLauncher("gameRevealed",null),this.sendPostMessageToOperator({gcmevent:"gameRevealed"}),!0===this.promotionsEnabled?this.promotions.init().then(function(){this._logger.integration.info("GAME.gameRevealed()"),this.game.gameRevealed()}.bind(this)):(this._logger.integration.info("GAME.gameRevealed()"),this.game.gameRevealed())}},{key:"stakeUpdate",value:function(e){if(this._logger.integration.info("GCM.stakeUpdate(\n\tstake:",e,"\n)"),e||(e=0),!f.Validate.isNumericValue(e))throw new Error("gcm.stakeUpdate: Invalid stake value:"+e);this.account.stake_=e;var t=this.ccyFormatter.format(this.account.stake_);return this.commonUI&&this.commonUI.stakeUpdate(t),t}},{key:"paidUpdate",value:function(e){if(this._logger.integration.info("GCM.paidUpdate(\n\tpaid:",e,"\n)"),e||(e=0),!f.Validate.isNumericValue(e))throw new Error("gcm.paidUpdate: Invalid paid value:"+e);this.account.paid_=e;var t=this.ccyFormatter.format(this.account.paid_);return this.commonUI&&this.commonUI.paidUpdate(t),t}},{key:"balancesUpdate",value:function(e,t,n){if(this._logger.integration.info("GCM.balancesUpdate(\n\tbalances:",e,"\n\tbalanceFudge:",t,"\n\tchangedFromCommonUI:",n,"\n)"),this.isAccountInit||(this.isAccountInit=!0,this.initExternalServices()),this.promotions.isEnabled()&&!0!==n){var r=this.promotions.getPromoBalanceFudge();null!==r&&(t=r)}t||(t=0),this.account.balances_={};for(var i in e)this.account.balances_[i]={},this.account.balances_[i].amount=e[i].amount;var o={};for(var i in this.account.balances_)o[i]={},o[i].amount=this.account.balances_[i].amount;o.CASH&&(o.CASH.amount=+this.account.balances_.CASH.amount-t);var s={};for(var i in o)s[i]={},s[i]=this.ccyFormatter.format(o[i].amount);if(this.commonUI&&this.commonUI.balancesUpdate(s),void 0!==(void 0===n?"undefined":a(n))&&!0===n&&this.game){var c={};for(i in this.account.balances_)c[i]={},c[i].amount=this.account.balances_[i].amount;this._logger.integration.info("GAME.balancesHasChanged(\n\tbalances:",c,"\n)"),this.game.balancesHasChanged(c)}return s}},{key:"initExternalServices",value:function(){this.initializeGamesparks(),this.initializeOgsClient(),this.initializeLiveServ()}},{key:"initializeGamesparks",value:function(){if(this.ogsParams.mode===this.gameInfo.PlayMode.REAL&&void 0!==this.gsConfiguration&&null!=this.gsConfiguration&&this.gsConfiguration.enabled){this.widgetUIAdaptor=new I.default(this.gameSparksHandler_);var e={challengeNotificationHandler:this.widgetUIAdaptor.handleFeatureNotification};this.gameSparksHandler_.init(this,this.ogsParams,this.notificationHandler_,e,this.gsConfiguration)}}},{key:"initializeOgsClient",value:function(){void 0!==this.ogsClientConfiguration&&null!=this.ogsClientConfiguration&&this.ogsClientConfiguration.enabled&&this.ogsClient.init(this.ogsClientConfiguration,this.ogsParams)}},{key:"initializeLiveServ",value:function(){var e=this;if(this.isLiveServEnabled()){if("function"!=typeof this.game.getOgsClientToken)return;var t=this.game.getOgsClientToken();void 0!==t&&null!=t&&this.ogsClient.getLiveServToken(t).then(function(t){e.liveServHandler.init(e,e.notificationHandler_,e.lsConfiguration,t)}).catch(function(e){return console.log(e)})}}},{key:"isLiveServEnabled",value:function(){return void 0!==this.lsConfiguration&&null!=this.lsConfiguration&&void 0!==this.lsConfiguration&&void 0!==this.lsConfiguration.enabled&&this.lsConfiguration.enabled}},{key:"gameAnimationStart",value:function(){this._logger.integration.info("GCM.gameAnimationStart()"),this.gameStateController_.gameAnimationStart(),this.sendPostMessageToOperator({gcmevent:"gameAnimationStart"})}},{key:"gameAnimationComplete",value:function(e){this._logger.integration.info("GCM.gameAnimationComplete(\n\tresumeCallback:",e,"\n)"),this.promotions.gameAnimationComplete(),this.gameStateController_.gameAnimationComplete(e),"function"==typeof this.game.jackpotBalancesUpdate&&this.latestJackpotBalances.length>0&&(this._logger.integration.info("GAME.jackpotBalancesUpdate(\n\tbalances:",this.latestJackpotBalances,"\n)"),this.game.jackpotBalancesUpdate(this.latestJackpotBalances)),this.sendPostMessageToOperator({gcmevent:"GameAnimationComplete"})}},{key:"isGameIdle",value:function(){var e=this.gameStateController_.isGameIdle();this.commonUI.gameIdle(e)}},{key:"handleError",value:function(e,t,n,r,i){this._logger.integration.info("GCM.handleError(\n\terrorCategory:",e,"\n\terrorSeverity:",t,"\n\terrorCode:",n,"\n\terrorMessage:",r,"\n\terrorParams:",i,"\n)"),this.notificationHandler_.addEventListener(p.GCMEvent.COMPLETE,this.onHandleErrorComplete,this),this.errorHandler_.handleError(e,t,n,r,i)}},{key:"handleServerError",value:function(e){this.errorHandler_.isRealityCheckError(e.errorCode)?this.getRealityCheckDetails(this.handleRealityCheckError):(this.errorHandler_.handleServerError(e),this.notificationHandler_.addEventListener(p.GCMEvent.COMPLETE,this.onHandleErrorComplete,this))}},{key:"getRealityCheckDetails",value:function(e){}},{key:"handleRealityCheckError",value:function(e){this._logger.integration.info("GCM.handleRealityCheckError(\n\trealityCheckDetails:",e,"\n)"),this.notificationHandler_.addEventListener(p.GCMEvent.COMPLETE,this.onHandleErrorComplete,this),this.errorHandler_.handleRealityCheckError(e)}},{key:"onHandleErrorComplete",value:function(){this.notificationHandler_.removeEventListener(p.GCMEvent.COMPLETE,this.onHandleErrorComplete,this);var e=d.ErrorNotification.getErrorParamIndex();void 0!=e?(this._logger.integration.info("GAME.resume(\n\terrorParamIndex:",e,"\n)"),this.game.resume(e),d.ErrorNotification.setErrorParamIndex(void 0)):(this._logger.integration.info("GAME.resume()"),this.game.resume())}},{key:"formatAmount",value:function(e){return this._logger.integration.info("GCM.formatAmount(\n\tamount:",e,"\n)"),this.ccyFormatter.format(parseFloat(e)).display}},{key:"optionHasChanged",value:function(e,t,n){this._logger.integration.info("GCM.optionHasChanged(\n\toptionType:",e,"\n\tchangedFrom:",t,"\n\tnewValue:",n,"\n)"),this.gameInfo.optionHasChanged(e,t,n)}},{key:"regOption",value:function(e){return this._logger.integration.info("GCM.regOption(\n\toptionType:",e,"\n)"),this.gameInfo.regOption(e)}},{key:"loadProgressUpdate",value:function(e){this._logger.integration.info("GCM.loadProgressUpdate(\n\tpercentLoaded:",e,"\n)"),this.gameInfo.loadProgressUpdate(e)}},{key:"resume",value:function(e){this._logger.integration.info("GCM.resume(\n\tfeedback:",e,"\n)"),this.gameStateController_.gameResumeCallback_&&this.notificationHandler_.addEventListener(p.GCMEvent.COMPLETE,this.onNotificationHandlingComplete,this),this.notificationHandler_.resume(e)}},{key:"onNotificationHandlingComplete",value:function(){this.notificationHandler_.removeEventListener(p.GCMEvent.COMPLETE,this.onNotificationHandlingComplete,this),this.gameStateController_.gameResumeCallback_&&(this.gameStateController_.gameResumeCallback_(),this.gameStateController_.gameResumeCallback_=null)}},{key:"reload",value:function(){this._logger.integration.info("GCM.reload()"),this.sendPostMessageToOperator({gcmevent:"reload",url:""}),"desktop"==this.ogsParams.device?this.sendPostMessageToGCMLauncher("reload",null):this.game.reload&&(this._logger.integration.info("GAME.reload()"),this.game.reload())}},{key:"redirect",value:function(e){this._logger.integration.info("GCM.redirect(\n\tredirectUrl:",e,"\n)"),this.sendPostMessageToOperator({gcmevent:"redirect",url:e}),"desktop"==this.ogsParams.device?this.sendPostMessageToGCMLauncher("redirect",arguments):this.game.redirect&&(this._logger.integration.info("GAME.redirect(\n\tredirectUrl:",e,"\n)"),this.game.redirect(e))}},{key:"gsPlayerAction",value:function(e){this.gameSparksHandler_.onMissionPlayerAction(e)}},{key:"registerService",value:function(e,t,n){var r=this;switch(this._logger.integration.info("GCM.registerService(\n\tserviceType:",e,"\n\tserviceUrl:",t,"\n\tinitParams:",n,"\n)"),e){case"CCY_FORMAT":this.addServiceScript(t).then(function(e){return r.ccyConfigLoaded(e,n)},function(e){throw new Error("Failed to load serviceScript: ",e)})}}},{key:"ccyConfigLoaded",value:function(e,t){this.ccyFormatter=currencyFormat,this.ccyFormatter.init.apply(this,t),this.configReady()}},{key:"addServiceScript",value:function(e){return new _.Promise(function(t,n){var r=document.createElement("script");r.type="text/javascript",r.src=e,r.addEventListener("load",function(){return t(r)},!1),r.addEventListener("error",function(){return n(r)},!1),document.body.appendChild(r)})}},{key:"getGCMConfiguration",value:function(e){return this.gcmConfiguration[e]&&this.gcmConfiguration[e].Enabled?this.gcmConfiguration[e].Parameters:null}},{key:"setupAnalytics",value:function(e){var t=this.getGCMConfiguration("analytics");if(t&&t.trackingid){var n=t.trackingid,r=t.samplerate;!function(e,t,n,r,i,o,a){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),a=t.getElementsByTagName(n)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(o,a)}(window,document,"script",0,"ga"),ga("create",n,"auto",{siteSpeedSampleRate:r}),ga("send","pageview"),window.performance&&(ga("send","timing","gcmReady",e,Math.round(performance.now())),this.analyticsEnabled=!0)}}},{key:"handleMessageTrigger",value:function(e){if(this._logger.integration.info("GCM.handleMessageTrigger(\n\tmessageNodeStr:",e,"\n)"),null!==e)try{var t=this.messageTrigger.getMessageFromXml(e);Object.keys(t).length>0&&(this.gameStateController_.gameResumeCallback_||this.notificationHandler_.addEventListener(p.GCMEvent.COMPLETE,this.onHandleMessageTriggerComplete,this),this.notificationHandler_.handleNotification(new g.GCMNotification(g.GCMNotification.TYPE.GENERIC_MESSAGE,t)))}catch(e){this.handleError("CONNECTION_ERROR","ERROR",null,null)}}},{key:"onHandleMessageTriggerComplete",value:function(){this.notificationHandler_.removeEventListener(p.GCMEvent.COMPLETE,this.onHandleMessageTriggerComplete,this),this._logger.integration.info("GAME.resume()"),this.game.resume()}},{key:"sendPostMessageToGCMLauncher",value:function(e,t){var n=this.createPostMessage(e,t);this.launcherWindow.postMessage(n,this.launcherOrigin)}},{key:"sendPostMessageToOperator",value:function(e){var t;(t="desktop"!=this.device?this.launcherWindow.parent.parent:this.launcherWindow.parent)&&t.postMessage(e,"*")}},{key:"createPostMessage",value:function(e,t){var n={};return n.action=e,n.params=t,JSON.stringify(n)}},{key:"getOGSParams",value:function(e,t){var n=E.UrlUtil.getAllParams(e,t),r={};return n.forEach(function(e){"gameUrl"!=name&&(r[e[0]]=decodeURIComponent(e[1]))}),r}},{key:"getPromoInfo",value:function(){return this._logger.integration.info("GCM.getPromoInfo()"),this.promotions.getPromoInfo()}},{key:"setPromoInfo",value:function(e){this._logger.integration.info("GCM.setPromoInfo(\n\tpromoInfo:",e,"\n)"),this.promotionsEnabled=!0,this.promotions.setPromoInfo(e)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.EventDispatcher=function(){function e(){r(this,e),this.listeners_={}}return i(e,[{key:"addEventListener",value:function(e,t,n){this.listeners_[e]||(this.listeners_[e]=new Array);for(var r=0;r<this.listeners_[e].length;++r){var i=this.listeners_[e][r];if(i.func==t&&i.scope==n)return}this.listeners_[e].push({func:t,scope:n})}},{key:"removeEventListener",value:function(e,t,n){var r=this.listeners_[e];if(r)if(t)for(var i=0;i<r.length;++i){var o=r[i].func,a=r[i].scope;if(t==o&&n==a){r.splice(i,1);break}}else r.splice(0,r.length)}},{key:"dispatchEvent",value:function(e){e.target=this;var t=this.listeners_[e.name];if(t)for(var n=0;n<t.length;++n){var r=t[n].func,i=t[n].scope;r.call(i,e)}}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHandler=void 0;var o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(10),c=n(11),u=n(47),l=n(28);t.ErrorHandler=function(){function e(){r(this,e),this.notificationHandler_=new s.NotificationHandler}return a(e,[{key:"isRealityCheckError",value:function(e){return console.log("ErrorHandler.isRealityCheckError(error) error: "+e),null!=e&&-1!=e.search(u.errorCategory.REALITY_CHECK)}},{key:"handleError",value:function(e,t,n,r,i){if(c.Validate.isEnumOption(u.errorCategory,e)||(e=e.NON_RECOVERABLE_ERROR),c.Validate.isEnumOption(u.errorSeverity,t)||(t=t.ERROR),c.Validate.isDefinedAndNotNull(n)||(n="UNKNOWN"),c.Validate.isDefinedAndNotNull(r)||(r="An unexpected error has occurred. Please try again."),null!=i&&"object"!==(void 0===i?"undefined":o(i)))throw new Error("gcm.handleError: Invalid errorParams type");this.notificationHandler_.handleNotification(new l.ErrorNotification(e,t,n,r,i))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.errorCategory={CRITICAL:"CRITICAL",LOGIN_ERROR:"LOGIN_ERROR",RECOVERABLE_ERROR:"RECOVERABLE_ERROR",NON_RECOVERABLE_ERROR:"NON_RECOVERABLE_ERROR",CONNECTION_ERROR:"CONNECTION_ERROR",INSUFFICIENT_FUNDS:"INSUFFICIENT_FUNDS",MULTI_CHOICE_DIALOG:"MULTI_CHOICE_DIALOG",OTHER_GAME_IN_PROGRESS:"OTHER_GAME_IN_PROGRESS",REALITY_CHECK:"REALITY_CHECK",REALITY_CHECK_COOKIE:"REALITY_CHECK_COOKIE"},t.errorSeverity={WARNING:"WARNING",INFO:"INFO",ERROR:"ERROR"},t.ogsapierrorCode={INSUFFICIENT_FUNDS:"OGS.1006",LOGIN_ERROR:"OGS.1000",GAMING_LIMIT:"OGS.1019",LOCKED_ACCOUNT:"OGS.1035",REALITY_CHECK:"OGS.1109"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GameInfo=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(11);t.GameInfo=function(){function e(){r(this,e),this.game_=null,this.commonUI_=null,this.OptionTypes={MUTE:"MUTE",TURBO:"TURBO",ABOUT:"ABOUT",HELP:"HELP",PAYTABLE:"PAYTABLE",GAME_PREFERENCES:"GAME_PREFERENCES",QUALITY:"QUALITY",CLOTH_COLOR:"CLOTH_COLOR",GAME_FEATURE:"GAME_FEATURE",AMBIENCE_SOUND:"AMBIENCE_SOUND"},this.PlayMode={REAL:"real",DEMO:"demo"},this.options_={},this.defaultOptions_={},this.defaultOptions_[this.OptionTypes.MUTE]=!1,this.defaultOptions_[this.OptionTypes.QUALITY]="HIGH",this.defaultOptions_[this.OptionTypes.CLOTH_COLOR]="BLUE"}return i(e,[{key:"setGame",value:function(e){this.game_=e}},{key:"setDefaultOption",value:function(e,t){this.defaultOptions_[e]=t}},{key:"getDefaultOption",value:function(e){return this.defaultOptions_[e]}},{key:"setCommonUI",value:function(e){this.commonUI_=e;var t;for(t in this.options_)this.commonUI_.regOption(t,this.options_[t])}},{key:"optionHasChanged",value:function(e,t,n){if("COMMONUI"!==t&&"GAME"!==t)throw new Error("gcm.optionHasChanged: changedFrom must be COMMONUI or GAME. Received "+t);if(!o.Validate.isEnumOption(this.OptionTypes,e))throw new Error("gcm.optionHasChanged: Unknown optionType "+e+" in change request from "+t);if("QUALITY"===e||"CLOTH_COLOR"===e){if(""===this.options_[e])throw new Error("else :gcm.optionHasChanged: option changed - "+e+" - has not been registered: "+this.options_[e])}else{if(!o.Validate.isValidBoolean(n))throw new Error("gcm.optionHasChanged: newValue must be boolean.  Received "+n);if(!o.Validate.isValidBoolean(this.options_[e]))throw new Error("gcm.optionHasChanged: option changed - "+e+" - has not been registered: "+options_[e])}this.options_[e]=n,"GAME"===t?this.commonUI_.optionHasChanged(e,n):"COMMONUI"===t&&this.game_.optionHasChanged(e,n)}},{key:"regOption",value:function(e){if(!o.Validate.isEnumOption(this.OptionTypes,e))throw new Error("gcm.regOption: Unknown optionType "+e);if(void 0===this.options_[e])switch(e){case this.OptionTypes.MUTE:this.options_[e]=this.defaultOptions_[this.OptionTypes.MUTE];break;case this.OptionTypes.TURBO:this.options_[e]=!1;break;case this.OptionTypes.QUALITY:this.options_[e]=this.defaultOptions_[this.OptionTypes.QUALITY];break;case this.OptionTypes.CLOTH_COLOR:this.options_[e]=this.defaultOptions_[this.OptionTypes.CLOTH_COLOR];break;default:this.options_[e]=!1}return this.commonUI_&&this.commonUI_.regOption(e,this.options_[e]),this.options_[e]}},{key:"loadProgressUpdate",value:function(e){if(!o.Validate.isPercentValue(e))throw new Error("gcm.loadProgressUpdate: Invalid percentLoaded value:"+e);this.commonUI_&&this.commonUI_.loadProgressUpdate(e)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CUIAdapter=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(18),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.CUIAdapter=function(){function e(t,n,i){r(this,e),this.gcm_=t,this.commonUIWindow_=n,this.commonUIOrigin=i,this.commonUIReady_=!0,this._logger=new a.default("GCM Debug")}return i(e,[{key:"sendPostMessageToCUI",value:function(e,t,n){if(this.commonUIReady_){var r=this.createPostMessage(e,t);this._logger.info("Sent post message to commonUI: "+r),this.commonUIWindow_.postMessage(r,this.commonUIOrigin)}}},{key:"createPostMessage",value:function(e,t){var n={};return n.action=e,n.params=t,JSON.stringify(n)}},{key:"stakeUpdate",value:function(e){this.sendPostMessageToCUI("stakeUpdate",arguments)}},{key:"paidUpdate",value:function(e){this.sendPostMessageToCUI("paidUpdate",arguments)}},{key:"balancesUpdate",value:function(e){this.sendPostMessageToCUI("balancesUpdate",arguments)}},{key:"loadProgressUpdate",value:function(e){this.sendPostMessageToCUI("loadProgressUpdate",arguments)}},{key:"gameReady",value:function(){this.sendPostMessageToCUI("gameReady",arguments)}},{key:"configReady",value:function(){this.sendPostMessageToCUI("configReady",arguments)}},{key:"gameAnimationStart",value:function(){this.sendPostMessageToCUI("gameAnimationStart",arguments)}},{key:"gameAnimationComplete",value:function(){this.sendPostMessageToCUI("gameAnimationComplete",arguments)}},{key:"gameIdle",value:function(e){this.sendPostMessageToCUI("gameIdle",arguments)}},{key:"handleError",value:function(e,t,n,r,i,o){this.sendPostMessageToCUI("handleError",arguments)}},{key:"handleSessionDurationUpdate",value:function(e){this.sendPostMessageToCUI("handleSessionDurationUpdate",arguments)}},{key:"regOption",value:function(e,t){this.sendPostMessageToCUI("regOption",arguments)}},{key:"optionHasChanged",value:function(e,t){this.sendPostMessageToCUI("optionHasChanged",arguments)}},{key:"handleSessionStats",value:function(e,t,n,r){this.sendPostMessageToCUI("handleSessionStats",arguments)}},{key:"gameResized",value:function(){this.sendPostMessageToCUI("gameResized",arguments)}},{key:"gameHasLoadingScreen",value:function(){this.sendPostMessageToCUI("gameHasLoadingScreen",arguments)}},{key:"handleMessageTrigger",value:function(e){this.sendPostMessageToCUI("handleMessageTrigger",arguments)}},{key:"handleGSTrigger",value:function(e){this.sendPostMessageToCUI("handleGSTrigger",arguments)}},{key:"handleFreeRoundsUpdate",value:function(e){this.sendPostMessageToCUI("handleFreeRoundsUpdate",arguments)}},{key:"handleFreeRoundsAward",value:function(e){this.sendPostMessageToCUI("handleFreeRoundsAward",arguments)}},{key:"handleFreeRoundsInProgress",value:function(e){this.sendPostMessageToCUI("handleFreeRoundsInProgress",arguments)}},{key:"showSyndicateJackpotWinAward",value:function(e){this.sendPostMessageToCUI("showSyndicateJackpotWinAward",arguments)}},{key:"showSyndicateJackpotProgressBar",value:function(e){this.sendPostMessageToCUI("showSyndicateJackpotProgressBar",arguments)}},{key:"disposeSyndicateJackpotProgressBar",value:function(e){this.sendPostMessageToCUI("disposeSyndicateJackpotProgressBar",arguments)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Promotions=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(51),a=n(61);t.Promotions=function(){function e(t){r(this,e),this.enabled=!1,this.ccyFormatter=null,this.notificationHandler=t,this.promotionalInfo=null,this.freerounds=null}return i(e,[{key:"setCcyFormatter",value:function(e){this.ccyFormatter=e}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setPromoInfo",value:function(e){this.isEnabled()&&(this.promotionalInfo=new o.PromoInfo,this.promotionalInfo.populate(e),null!==this.freerounds&&this.freerounds.isActiveFreeRound()&&this.freerounds.updateFreeRounds(this.promotionalInfo.getFreeRounds(),this.promotionalInfo.isGamePlayComplete()))}},{key:"getPromoInfo",value:function(){if(!this.isEnabled()||null===this.freerounds)return null;var e=new o.PromoInfo,t=this.freerounds.cloneActiveFreeRound();return null!==t&&(e.setGamePlayStatus(this.promotionalInfo.getGamePlayStatus()),e.setFreeRound(t)),e.hasPromotions()?e:null}},{key:"init",value:function(){return this.isEnabled()&&null!==this.promotionalInfo&&this.promotionalInfo.hasFreeRounds()?new Promise(function(e,t){this.freerounds=new a.FreeRounds(this.promotionalInfo.getFreeRounds(),this.notificationHandler,this.ccyFormatter,e.bind(this))}.bind(this)):Promise.resolve()}},{key:"getPromoBalanceFudge",value:function(){return this.isEnabled()&&null!==this.freerounds&&this.freerounds.isActiveFreeRound()?this.freerounds.isActiveFreeRoundFinished()&&this.promotionalInfo.isGamePlayComplete()?this.freerounds.getActiveFreeRoundTotalWin():0:null}},{key:"gameAnimationComplete",value:function(){this.isEnabled()&&null!==this.freerounds&&this.freerounds.isActiveFreeRound()&&this.promotionalInfo.isGamePlayComplete()&&this.freerounds.clearCompletedActiveFreeRound()}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PromoInfo=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(19),a=n(60);t.PromoInfo=function(){function e(){r(this,e),this.PROMOTIONS={}}return i(e,[{key:"populate",value:function(e){this.PROMOTIONS=JSON.parse(JSON.stringify(e)).PROMOTIONS,this.validatePromoInfo()}},{key:"validatePromoInfo",value:function(){var e=new o.Validator,t=e.validate(this,a.jsonSchema).errors;if(0!==t.length)throw this.PROMOTIONS={},new Error("Invalid promotional information: "+t[0].stack)}},{key:"setFreeRound",value:function(e){this.PROMOTIONS.FREEROUNDS=new Array(e),this.validatePromoInfo()}},{key:"hasPromotions",value:function(){return void 0!==this.PROMOTIONS&&this.hasFreeRounds()}},{key:"hasFreeRounds",value:function(){return void 0!==this.PROMOTIONS.FREEROUNDS&&this.PROMOTIONS.FREEROUNDS.length>0}},{key:"getFreeRounds",value:function(){return this.PROMOTIONS.FREEROUNDS}},{key:"isGamePlayComplete",value:function(){return"complete"===this.PROMOTIONS.GAMEPLAY}},{key:"setGamePlayStatus",value:function(e){this.PROMOTIONS.GAMEPLAY=e}},{key:"getGamePlayStatus",value:function(){return this.PROMOTIONS.GAMEPLAY}}]),e}()},function(e,t,n){"use strict";function r(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}var i=n(29),o=n(59),a=n(7),s=a.ValidatorResult,c=a.SchemaError,u=a.SchemaContext,l=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(f),this.attributes=Object.create(o.validators)};l.prototype.customFormats={},l.prototype.schemas=null,l.prototype.types=null,l.prototype.attributes=null,l.prototype.unresolvedRefs=null,l.prototype.addSchema=function(e,t){if(!e)return null;var n=t||e.id;return this.addSubSchema(n,e),n&&(this.schemas[n]=e),this.schemas[n]},l.prototype.addSubSchema=function(e,t){if(t&&"object"==typeof t){if(t.$ref){var n=i.resolve(e,t.$ref);return void(void 0===this.schemas[n]&&(this.schemas[n]=null,this.unresolvedRefs.push(n)))}var r=t.id&&i.resolve(e,t.id),o=r||e;if(r){if(this.schemas[r]){if(!a.deepCompareStrict(this.schemas[r],t))throw new Error("Schema <"+t+"> already exists with different definition");return this.schemas[r]}this.schemas[r]=t;var s=r.replace(/^([^#]*)#$/,"$1");this.schemas[s]=t}return this.addSubSchemaArray(o,t.items instanceof Array?t.items:[t.items]),this.addSubSchemaArray(o,t.extends instanceof Array?t.extends:[t.extends]),this.addSubSchema(o,t.additionalItems),this.addSubSchemaObject(o,t.properties),this.addSubSchema(o,t.additionalProperties),this.addSubSchemaObject(o,t.definitions),this.addSubSchemaObject(o,t.patternProperties),this.addSubSchemaObject(o,t.dependencies),this.addSubSchemaArray(o,t.disallow),this.addSubSchemaArray(o,t.allOf),this.addSubSchemaArray(o,t.anyOf),this.addSubSchemaArray(o,t.oneOf),this.addSubSchema(o,t.not),this.schemas[r]}},l.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)this.addSubSchema(e,t[n])},l.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var n in t)this.addSubSchema(e,t[n])},l.prototype.setSchemas=function(e){this.schemas=e},l.prototype.getSchema=function(e){return this.schemas[e]},l.prototype.validate=function(e,t,n,r){n||(n={});var o=n.propertyName||"instance",a=i.resolve(n.base||"/",t.id||"");if(r||(r=new u(t,n,o,a,Object.create(this.schemas)),r.schemas[a]||(r.schemas[a]=t)),t){var s=this.validateSchema(e,t,n,r);if(!s)throw new Error("Result undefined");return s}throw new c("no schema specified",t)},l.prototype.validateSchema=function(e,t,n,i){var l=new s(e,t,n,i);if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var f={schema:t,ctx:i};t.extends.forEach(this.schemaTraverser.bind(this,f)),t=f.schema,f.schema=null,f.ctx=null,f=null}else t=a.deepMerge(t,this.superResolve(t.extends,i));var h;if(h=r(t)){var d=this.resolve(t,h,i),p=new u(d.subschema,n,i.propertyPath,d.switchSchema,i.schemas);return this.validateSchema(e,d.subschema,n,p)}var m=n&&n.skipAttributes||[];for(var g in t)if(!o.ignoreProperties[g]&&m.indexOf(g)<0){var v=null,y=this.attributes[g];if(y)v=y.call(this,e,t,n,i);else if(!1===n.allowUnknownAttributes)throw new c("Unsupported attribute: "+g,t);v&&l.importErrors(v)}if("function"==typeof n.rewrite){var E=n.rewrite.call(this,e,t,n,i);l.instance=E}return l},l.prototype.schemaTraverser=function(e,t){e.schema=a.deepMerge(e.schema,this.superResolve(t,e.ctx))},l.prototype.superResolve=function(e,t){var n;return(n=r(e))?this.resolve(e,n,t).subschema:e},l.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var r=i.parse(t),o=r&&r.hash,s=o&&o.length&&t.substr(0,t.length-o.length);if(!s||!n.schemas[s])throw new c("no such schema <"+t+">",e);var u=a.objectGetPath(n.schemas[s],o.substr(1));if(void 0===u)throw new c("no such schema "+o+" located in <"+s+">",e);return{subschema:u,switchSchema:t}},l.prototype.testType=function(e,t,n,r,i){if("function"==typeof this.types[i])return this.types[i].call(this,e);if(i&&"object"==typeof i){var o=this.validateSchema(e,i,n,r);return void 0===o||!(o&&o.errors.length)}return!0};var f=l.prototype.types={};f.string=function(e){return"string"==typeof e},f.number=function(e){return"number"==typeof e&&isFinite(e)},f.integer=function(e){return"number"==typeof e&&e%1==0},f.boolean=function(e){return"boolean"==typeof e},f.array=function(e){return Array.isArray(e)},f.null=function(e){return null===e},f.date=function(e){return e instanceof Date},f.any=function(e){return!0},f.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},e.exports=l},function(e,t,n){(function(e,r){var i;!function(o){function a(e){throw new RangeError(P[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(N,"."),r+s(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=x(e>>>10&1023|55296),e=56320|1023&e),t+=x(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:b}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?U(e/C):e>>1,e+=U(e/t);e>M*O>>1;r+=b)e=U(e/M);return U(r+(M+1)*e/(e+w))}function p(e){var t,n,r,i,o,s,c,u,h,p,m=[],g=e.length,v=0,y=T,E=I;for(n=e.lastIndexOf(A),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=v,s=1,c=b;i>=g&&a("invalid-input"),u=f(e.charCodeAt(i++)),(u>=b||u>U((S-v)/s))&&a("overflow"),v+=u*s,h=c<=E?_:c>=E+O?O:c-E,!(u<h);c+=b)p=b-h,s>U(S/p)&&a("overflow"),s*=p;t=m.length+1,E=d(v-o,t,0==o),U(v/t)>S-y&&a("overflow"),y+=U(v/t),v%=t,m.splice(v++,0,y)}return l(m)}function m(e){var t,n,r,i,o,s,c,l,f,p,m,g,v,y,E,w=[];for(e=u(e),g=e.length,t=T,n=0,o=I,s=0;s<g;++s)(m=e[s])<128&&w.push(x(m));for(r=i=w.length,i&&w.push(A);r<g;){for(c=S,s=0;s<g;++s)(m=e[s])>=t&&m<c&&(c=m);for(v=r+1,c-t>U((S-n)/v)&&a("overflow"),n+=(c-t)*v,t=c,s=0;s<g;++s)if(m=e[s],m<t&&++n>S&&a("overflow"),m==t){for(l=n,f=b;p=f<=o?_:f>=o+O?O:f-o,!(l<p);f+=b)E=l-p,y=b-p,w.push(x(h(p+E%y,0))),l=U(E/y);w.push(x(h(l,0))),o=d(n,v,r==i),n=0,++r}++n,++t}return w.join("")}function g(e){return c(e,function(e){return R.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return c(e,function(e){return k.test(e)?"xn--"+m(e):e})}var y=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var E,S=2147483647,b=36,_=1,O=26,w=38,C=700,I=72,T=128,A="-",R=/^xn--/,k=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=b-_,U=Math.floor,x=String.fromCharCode;E={version:"1.4.1",ucs2:{decode:u,encode:l},decode:p,encode:m,toASCII:v,toUnicode:g},void 0!==(i=function(){return E}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(54)(e),n(12))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(57),t.encode=t.stringify=n(58)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var f,h,d,p,m=e[l].replace(s,"%20"),g=m.indexOf(n);g>=0?(f=m.substr(0,g),h=m.substr(g+1)):(f=m,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";function r(e,t,n,r,i){var o=this.validateSchema(e,i,t,n);return!o.valid&&r instanceof Function&&r(o),o.valid}function i(e,t,n,r,i,o){if(!t.properties||void 0===t.properties[i])if(!1===t.additionalProperties)o.addError({name:"additionalProperties",argument:i,message:"additionalProperty "+JSON.stringify(i)+" exists in instance when not allowed"});else{var a=t.additionalProperties||{},s=this.validateSchema(e[i],a,n,r.makeChild(a,i));s.instance!==o.instance[i]&&(o.instance[i]=s.instance),o.importErrors(s)}}function o(e,t,n){var r,i=n.length;for(r=t+1,i;r<i;r++)if(a.deepCompareStrict(e,n[r]))return!1;return!0}var a=n(7),s=a.ValidatorResult,c=a.SchemaError,u={};u.ignoreProperties={id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0};var l=u.validators={};l.type=function(e,t,n,r){if(void 0===e)return null;var i=new s(e,t,n,r),o=Array.isArray(t.type)?t.type:[t.type];if(!o.some(this.testType.bind(this,e,t,n,r))){var a=o.map(function(e){return e.id&&"<"+e.id+">"||e+""});i.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return i},l.anyOf=function(e,t,n,i){if(void 0===e)return null;var o=new s(e,t,n,i),a=new s(e,t,n,i);if(!Array.isArray(t.anyOf))throw new c("anyOf must be an array");if(!t.anyOf.some(r.bind(this,e,n,i,function(e){a.importErrors(e)}))){var u=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});n.nestedErrors&&o.importErrors(a),o.addError({name:"anyOf",argument:u,message:"is not any of "+u.join(",")})}return o},l.allOf=function(e,t,n,r){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new c("allOf must be an array");var i=new s(e,t,n,r),o=this;return t.allOf.forEach(function(t,a){var s=o.validateSchema(e,t,n,r);if(!s.valid){var c=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+a+"]";i.addError({name:"allOf",argument:{id:c,length:s.errors.length,valid:s},message:"does not match allOf schema "+c+" with "+s.errors.length+" error[s]:"}),i.importErrors(s)}}),i},l.oneOf=function(e,t,n,i){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new c("oneOf must be an array");var o=new s(e,t,n,i),a=new s(e,t,n,i),u=t.oneOf.filter(r.bind(this,e,n,i,function(e){a.importErrors(e)})).length,l=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==u&&(n.nestedErrors&&o.importErrors(a),o.addError({name:"oneOf",argument:l,message:"is not exactly one from "+l.join(",")})),o},l.properties=function(e,t,n,r){if(void 0!==e&&e instanceof Object){var i=new s(e,t,n,r),o=t.properties||{};for(var a in o){var c=(e||void 0)&&e[a],u=this.validateSchema(c,o[a],n,r.makeChild(o[a],a));u.instance!==i.instance[a]&&(i.instance[a]=u.instance),i.importErrors(u)}return i}},l.patternProperties=function(e,t,n,r){if(void 0!==e&&this.types.object(e)){var o=new s(e,t,n,r),a=t.patternProperties||{};for(var c in e){var u=!0;for(var l in a){if(new RegExp(l).test(c)){u=!1;var f=this.validateSchema(e[c],a[l],n,r.makeChild(a[l],c));f.instance!==o.instance[c]&&(o.instance[c]=f.instance),o.importErrors(f)}}u&&i.call(this,e,t,n,r,c,o)}return o}},l.additionalProperties=function(e,t,n,r){if(void 0!==e&&this.types.object(e)){if(t.patternProperties)return null;var o=new s(e,t,n,r);for(var a in e)i.call(this,e,t,n,r,a,o);return o}},l.minProperties=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var i=new s(e,t,n,r);return Object.keys(e).length>=t.minProperties||i.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),i},l.maxProperties=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var i=new s(e,t,n,r);return Object.keys(e).length<=t.maxProperties||i.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),i},l.items=function(e,t,n,r){if(!Array.isArray(e))return null;var i=this,o=new s(e,t,n,r);return void 0!==e&&t.items?(e.every(function(e,a){var s=Array.isArray(t.items)?t.items[a]||t.additionalItems:t.items;if(void 0===s)return!0;if(!1===s)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=i.validateSchema(e,s,n,r.makeChild(s,a));return c.instance!==o.instance[a]&&(o.instance[a]=c.instance),o.importErrors(c),!0}),o):o},l.minimum=function(e,t,n,r){if("number"!=typeof e)return null;var i=new s(e,t,n,r),o=!0;return o=t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum:e>=t.minimum,o||i.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),i},l.maximum=function(e,t,n,r){if("number"!=typeof e)return null;var i,o=new s(e,t,n,r);return i=t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum:e<=t.maximum,i||o.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),o};var f=function(e,t,n,r,i,o){if("number"!=typeof e)return null;var u=t[i];if(0==u)throw new c(i+" cannot be zero");var l=new s(e,t,n,r),f=a.getDecimalPlaces(e),h=a.getDecimalPlaces(u),d=Math.max(f,h),p=Math.pow(10,d);return Math.round(e*p)%Math.round(u*p)!=0&&l.addError({name:i,argument:u,message:o+JSON.stringify(u)}),l};l.multipleOf=function(e,t,n,r){return f(e,t,n,r,"multipleOf","is not a multiple of (divisible by) ")},l.divisibleBy=function(e,t,n,r){return f(e,t,n,r,"divisibleBy","is not divisible by (multiple of) ")},l.required=function(e,t,n,r){var i=new s(e,t,n,r);return void 0===e&&!0===t.required?i.addError({name:"required",message:"is required"}):e&&"object"==typeof e&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&i.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),i},l.pattern=function(e,t,n,r){if("string"!=typeof e)return null;var i=new s(e,t,n,r);return e.match(t.pattern)||i.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),i},l.format=function(e,t,n,r){var i=new s(e,t,n,r);return i.disableFormat||a.isFormat(e,t.format,this)||i.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),i},l.minLength=function(e,t,n,r){if("string"!=typeof e)return null;var i=new s(e,t,n,r);return e.length>=t.minLength||i.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),i},l.maxLength=function(e,t,n,r){if("string"!=typeof e)return null;var i=new s(e,t,n,r);return e.length<=t.maxLength||i.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),i},l.minItems=function(e,t,n,r){if(!Array.isArray(e))return null;var i=new s(e,t,n,r);return e.length>=t.minItems||i.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),i},l.maxItems=function(e,t,n,r){if(!Array.isArray(e))return null;var i=new s(e,t,n,r);return e.length<=t.maxItems||i.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),i},l.uniqueItems=function(e,t,n,r){function i(e,t,n){for(var r=t+1;r<n.length;r++)if(a.deepCompareStrict(e,n[r]))return!1;return!0}var o=new s(e,t,n,r);return Array.isArray(e)?(e.every(i)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o):o},l.uniqueItems=function(e,t,n,r){if(!Array.isArray(e))return null;var i=new s(e,t,n,r);return e.every(o)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i},l.dependencies=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var i=new s(e,t,n,r);for(var o in t.dependencies)if(void 0!==e[o]){var a=t.dependencies[o],c=r.makeChild(a,o);if("string"==typeof a&&(a=[a]),Array.isArray(a))a.forEach(function(t){void 0===e[t]&&i.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})});else{var u=this.validateSchema(e,a,n,c);i.instance!==u.instance&&(i.instance=u.instance),u&&u.errors.length&&(i.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),i.importErrors(u))}}return i},l.enum=function(e,t,n,r){if(!Array.isArray(t.enum))throw new c("enum expects an array",t);if(void 0===e)return null;var i=new s(e,t,n,r);return t.enum.some(a.deepCompareStrict.bind(null,e))||i.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.join(",")}),i},l.const=function(e,t,n,r){var i=new s(e,t,n,r);return a.deepCompareStrict(t.const,e)||i.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),i},l.not=l.disallow=function(e,t,n,r){var i=this;if(void 0===e)return null;var o=new s(e,t,n,r),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(a){if(i.testType(e,t,n,r,a)){var s=a&&a.id&&"<"+a.id+">"||a;o.addError({name:"not",argument:s,message:"is of prohibited type "+s})}}),o):null},e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jsonSchema={$schema:"http://json-schema.org/draft-06/schema#",properties:{PROMOTIONS:{id:"/properties/PROMOTIONS",properties:{GAMEPLAY:{id:"/properties/PROMOTIONS/properties/GAMEPLAY",title:"The gameplay schema.",type:"string",enum:["pending","complete"]},FREEROUNDS:{id:"/properties/PROMOTIONS/properties/FREEROUNDS",items:{id:"/properties/PROMOTIONS/properties/FREEROUNDS/items",properties:{ACTIVATIONID:{examples:["PROM_100002"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/ACTIVATIONID",title:"The activationid schema.",type:"string"},CAMPAIGNID:{examples:["FW_10_SIGNUP"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/CAMPAIGNID",title:"The campaignid schema.",type:"string"},CAMPAIGNVALUE:{examples:["7.5"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/CAMPAIGNVALUE",title:"The campaignvalue schema.",type:"number"},ENDDATE:{examples:["2016-11-08T12:00:00Z"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/ENDDATE",title:"The enddate schema.",type:"string"},OPTIONS:{id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/OPTIONS",items:{id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/OPTIONS/items",properties:{BETLEVEL:{examples:["2.5"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/OPTIONS/items/properties/BETLEVEL",title:"The betlevel schema.",type:"number"},REMAININGROUNDS:{examples:["2"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/OPTIONS/items/properties/REMAININGROUNDS",title:"The remainingrounds schema.",type:"integer"},TOTALROUNDS:{examples:["4"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/OPTIONS/items/properties/TOTALROUNDS",title:"The totalrounds schema.",type:"integer"},FEATURE:{examples:["5x Multiplier"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/FEATURE",title:"The feature schema.",type:"string"}},required:["REMAININGROUNDS","TOTALROUNDS","BETLEVEL","FEATURE"],type:"object"},maxItems:4,minItems:1,type:"array"},REJECTABLE:{examples:["True"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/REJECTABLE",title:"The rejectable schema.",type:"boolean"},TOTALWIN:{examples:["30.58"],id:"/properties/PROMOTIONS/properties/FREEROUNDS/items/properties/TOTALWIN",title:"The totalwin schema.",type:"number"}},required:["CAMPAIGNID","ACTIVATIONID","OPTIONS"],type:"object"},minItems:1,type:"array"}},required:["GAMEPLAY","FREEROUNDS"],type:"object"}},required:["PROMOTIONS"],type:"object"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FreeRounds=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(30),a=n(62),s=n(4);t.FreeRounds=function(){function e(t,n,i,o){r(this,e),this.freeRounds=new Array,this.activeFreeRound=null,this.notificationHandler=n,this.ccyFormatter=i,this.onReadyCallback=o,this.activateFreeRounds(t)}return i(e,[{key:"activateFreeRounds",value:function(e){this.populateFreeRounds(e),this.activeFreeRound=this.getNextFreeRound(),null!==this.activeFreeRound?"inprogress"===this.activeFreeRound.STATUS?this.notificationHandler.handleNotification(new s.GCMNotification(s.GCMNotification.TYPE.COMMONUI_FREEROUNDS_IN_PROGRESS,JSON.parse(JSON.stringify(this.activeFreeRound)),this.freeRoundsInProgressCallback.bind(this))):this.notificationHandler.handleNotification(new s.GCMNotification(s.GCMNotification.TYPE.COMMONUI_FREEROUNDS_AWARD,JSON.parse(JSON.stringify(this.activeFreeRound)),this.freeRoundsAwardCallback.bind(this))):this.onReadyCallback()}},{key:"populateFreeRounds",value:function(e){this.freeRounds=new Array;for(var t=0;t<e.length;t++){var n=new a.FreeRoundInfo(e[t].CAMPAIGNID,e[t].ACTIVATIONID,e[t].ENDDATE,e[t].TOTALWIN,e[t].CAMPAIGNVALUE,e[t].REJECTABLE,e[t].OPTIONS,this.ccyFormatter);this.freeRounds.push(n)}}},{key:"updateFreeRounds",value:function(e,t){this.refreshActiveFreeRound(e[0]),null!==this.activeFreeRound&&t&&(this.notificationHandler.handleNotification(new s.GCMNotification(s.GCMNotification.TYPE.COMMONUI_FREEROUNDS_UPDATE,JSON.parse(JSON.stringify(this.activeFreeRound)))),this.notificationHandler.handleNotification(new s.GCMNotification(s.GCMNotification.TYPE.GAME_FREEROUNDS_UPDATE,JSON.parse(JSON.stringify(this.activeFreeRound)))))}},{key:"clearCompletedActiveFreeRound",value:function(){null!==this.activeFreeRound&&"completed"===this.activeFreeRound.STATUS&&(this.activeFreeRound=null)}},{key:"refreshActiveFreeRound",value:function(e){if(null!==this.activeFreeRound){var t=this.activeFreeRound.CAMPAIGNID,n=this.activeFreeRound.ACTIVATIONID;this.activeFreeRound.TOTALWIN,this.activeFreeRound.OPTIONS[0].REMAININGROUNDS;this.activeFreeRound=null;for(var r=0;r<this.freeRounds.length;r++)if(this.freeRounds[r].CAMPAIGNID===t&&this.freeRounds[r].ACTIVATIONID===n){var i=this.freeRounds[r];void 0!==e.TOTALWIN&&e.TOTALWIN!==i.TOTALWIN&&i.setTotalWin(e.TOTALWIN,this.ccyFormatter),void 0!==e.OPTIONS&&1===e.OPTIONS.length&&void 0!==e.OPTIONS[0].REMAININGROUNDS&&e.OPTIONS[0].REMAININGROUNDS!==i.OPTIONS[0].REMAININGROUNDS&&i.setRemainingRounds(e.OPTIONS[0].REMAININGROUNDS),this.activeFreeRound=this.freeRounds[r];break}}}},{key:"getNextFreeRound",value:function(){var e=this.freeRounds.filter(this.isIncompleted);if(0===e.length)return null;if(1===e.length)return e[0];var t=e.filter(this.isInProgress);if(1===t.length)return t[0];if(t.length>1)return t.sort(this.sortByEndDate)[0];var n=e.filter(this.isNotRejectable);return 1===n.length?n[0]:n.length>1?n.sort(this.sortByEndDate)[0]:e.sort(this.sortByEndDate)[0]}},{key:"isActiveFreeRound",value:function(){return null!==this.activeFreeRound}},{key:"cloneActiveFreeRound",value:function(){return null===this.activeFreeRound?this.activeFreeRound:new o.FreeRound(this.activeFreeRound.CAMPAIGNID,this.activeFreeRound.ACTIVATIONID,this.activeFreeRound.ENDDATE,this.activeFreeRound.TOTALWIN,this.activeFreeRound.CAMPAIGNVALUE,this.activeFreeRound.REJECTABLE,this.activeFreeRound.OPTIONS)}},{key:"isNotRejectable",value:function(e){return!e.REJECTABLE}},{key:"isInProgress",value:function(e){return"inprogress"===e.STATUS}},{key:"isIncompleted",value:function(e){return"completed"!==e.STATUS}},{key:"sortByEndDate",value:function(e,t){return new Date(e.ENDDATE)-new Date(t.ENDDATE)}},{key:"freeRoundsAwardCallback",value:function(e){if(0===e){if(!0!==this.activeFreeRound.REJECTABLE)throw new Error("FreeRound cannot be used later");this.activeFreeRound=null,this.onReadyCallback()}else{for(var t=this.activeFreeRound.OPTIONS,n=t.length-1;n>=0;n--)t[n].BETLEVEL!==e&&t.splice(n,1);if(1!==this.activeFreeRound.OPTIONS.length)throw new Error("Invalid FreeRound option selected");this.notificationHandler.handleNotification(new s.GCMNotification(s.GCMNotification.TYPE.COMMONUI_FREEROUNDS_UPDATE,JSON.parse(JSON.stringify(this.activeFreeRound)),this.freeRoundsCommonUIActivatedCallback.bind(this)))}}},{key:"freeRoundsInProgressCallback",value:function(){this.notificationHandler.handleNotification(new s.GCMNotification(s.GCMNotification.TYPE.COMMONUI_FREEROUNDS_UPDATE,JSON.parse(JSON.stringify(this.activeFreeRound)),this.freeRoundsCommonUIActivatedCallback.bind(this)))}},{key:"freeRoundsCommonUIActivatedCallback",value:function(){this.notificationHandler.handleNotification(new s.GCMNotification(s.GCMNotification.TYPE.GAME_FREEROUNDS_UPDATE,JSON.parse(JSON.stringify(this.activeFreeRound)),this.freeRoundsGameActivatedCallback.bind(this)))}},{key:"freeRoundsGameActivatedCallback",value:function(){this.onReadyCallback()}},{key:"isActiveFreeRoundFinished",value:function(){return!!this.isActiveFreeRound()&&0===this.activeFreeRound.OPTIONS[0].REMAININGROUNDS}},{key:"getActiveFreeRoundTotalWin",value:function(){return this.activeFreeRound.TOTALWIN}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.FreeRoundInfo=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(19),u=n(30),l=n(63);t.FreeRoundInfo=function(e){function t(e,n,o,a,s,c,u,l){r(this,t);var f=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a,s,c,u));f.TOTALWIN_FMT=l.format(a).display,f.CAMPAIGNVALUE_FMT=l.format(s).display;for(var h=0;h<f.OPTIONS.length;h++){f.OPTIONS[h].BETLEVEL_FMT=l.format(u[h].BETLEVEL).display}return f.STATUS="notstarted",f.updateStatus(),f.validateFreeRoundInfo(),f}return o(t,e),s(t,[{key:"setTotalWin",value:function(e,t){this.TOTALWIN=e,this.TOTALWIN_FMT=t.format(e).display,this.validateFreeRoundInfo()}},{key:"setRemainingRounds",value:function(e){this.OPTIONS[0].REMAININGROUNDS=e,this.updateStatus(),this.validateFreeRoundInfo()}},{key:"updateStatus",value:function(){1===this.OPTIONS.length&&(0===this.OPTIONS[0].REMAININGROUNDS?this.STATUS="completed":this.OPTIONS[0].TOTALROUNDS>this.OPTIONS[0].REMAININGROUNDS&&(this.STATUS="inprogress"))}},{key:"validateFreeRoundInfo",value:function(){var e=new c.Validator,t=e.validate(this,l.jsonSchema).errors;if(0!==t.length)throw new Error("Invalid freeround information: "+t[0].stack)}}]),t}(u.FreeRound)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jsonSchema={$schema:"http://json-schema.org/draft-06/schema#",definitions:{},properties:{ACTIVATIONID:{examples:["PROM_100002"],id:"/properties/ACTIVATIONID",title:"The activationid schema.",type:"string"},CAMPAIGNID:{examples:["FW_10_SIGNUP"],id:"/properties/CAMPAIGNID",title:"The campaignid schema.",type:"string"},CAMPAIGNVALUE:{examples:["100"],id:"/properties/CAMPAIGNVALUE",title:"The campaignvalue schema.",type:"number"},CAMPAIGNVALUE_FMT:{examples:["100.00"],id:"/properties/CAMPAIGNVALUE_FMT",title:"The campaignvalue_fmt schema.",type:"string"},ENDDATE:{examples:["2016-11-08T12:00:00Z"],id:"/properties/ENDDATE",title:"The enddate schema.",type:"string"},OPTIONS:{id:"/properties/OPTIONS",items:{id:"/properties/OPTIONS/items",properties:{BETLEVEL:{examples:["25"],id:"/properties/OPTIONS/items/properties/BETLEVEL",title:"The betlevel schema.",type:"number"},BETLEVEL_FMT:{examples:["325.00"],id:"/properties/OPTIONS/items/properties/BETLEVEL_FMT",title:"The betlevel_fmt schema.",type:"string"},FEATURE:{examples:[""],id:"/properties/OPTIONS/items/properties/FEATURE",title:"The feature schema.",type:"string"},REMAININGROUNDS:{examples:["2"],id:"/properties/OPTIONS/items/properties/REMAININGROUNDS",title:"The remainingrounds schema.",type:"integer"},TOTALROUNDS:{examples:["4"],id:"/properties/OPTIONS/items/properties/TOTALROUNDS",title:"The totalrounds schema.",type:"integer"}},required:["REMAININGROUNDS","TOTALROUNDS","BETLEVEL","FEATURE","BETLEVEL_FMT"],type:"object"},maxItems:4,minItems:1,type:"array"},REJECTABLE:{examples:["True"],id:"/properties/REJECTABLE",title:"The rejectable schema.",type:"boolean"},STATUS:{examples:["inprogress"],id:"/properties/STATUS",title:"The status schema.",type:"string"},TOTALWIN:{examples:["31.1"],id:"/properties/TOTALWIN",title:"The totalwin schema.",type:"number"},TOTALWIN_FMT:{examples:["31.10"],id:"/properties/TOTALWIN_FMT",title:"The totalwin_fmt schema.",type:"string"}},required:["STATUS","ENDDATE","CAMPAIGNID","TOTALWIN_FMT","CAMPAIGNVALUE","TOTALWIN","ACTIVATIONID","CAMPAIGNVALUE_FMT","OPTIONS","REJECTABLE"],type:"object"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){try{return c.default.stringToXml(e).getElementsByTagName("MESSAGE")[0]}catch(e){throw new Error("Invalid Message Xml.")}}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageTrigger=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(65),c=r(s),u=n(66),l=r(u),f=n(32),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=t.MessageTrigger=function(){function e(){i(this,e)}return a(e,[{key:"getMessageFromXml",value:function(e){if(null!==e){var t=o(e),n=t.getAttribute("id");h.isValidMessageType(n);var r=new l.default.createMessageInfo(n,t),i=r.getMessageFromXml();return i&&r.setMessage(i),r.MESSAGE}}}]),e}(),p=new d;t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t.XmlUtil=function(){function e(){r(this,e)}return i(e,[{key:"stringToXml",value:function(e){if(window.DOMParser){return(new window.DOMParser).parseFromString(e,"text/xml")}var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.loadXML(e),t}},{key:"xmlToString",value:function(e){if(window.XMLSerializer){return(new window.XMLSerializer).serializeToString(e)}return e.xml}}]),e}(),a=new o;t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageInfoFactory=void 0;var a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(67),u=r(c),l=n(70),f=r(l),h=n(32),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),p=(a={},o(a,d.SupportedMessageTypes.CMA,u.default),o(a,d.SupportedMessageTypes.RC,f.default),a),m=t.MessageInfoFactory=function(){function e(){i(this,e)}return s(e,[{key:"createMessageInfo",value:function(e,t){var n=p[e],r=null;return n&&(r=new n(t)),r}}]),e}(),g=new m;t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=new Array;return e.map(function(e){if("#text"!==e.nodeName){var n=e.getAttribute("id"),r=e.getAttribute("action"),i=e.childNodes[0].nodeValue;t.push(new p.default(n,r,i))}}),t}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(31),f=r(l),h=n(68),d=n(69),p=r(d),m=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),u(t,[{key:"getMessageFromXml",value:function(){try{var e=this.messageNode.getAttribute("id"),t=this.messageNode.getElementsByTagName("TITLE")[0].childNodes[0].nodeValue,n=this.messageNode.getElementsByTagName("TEXT")[0].childNodes[0].nodeValue,r=new h.CmaMessage(e,t,n);if(this.messageNode.getElementsByTagName("OPTIONS").length>0){var i=Array.from(this.messageNode.getElementsByTagName("OPTIONS")[0].childNodes);r.setOptions(s(i))}return r}catch(e){throw new Error("CMA Message XML is not valid")}}},{key:"validateMessage",value:function(e){var t=this.validator.validate(e,h.jsonSchema).errors;if(0!==t.length)throw new Error("Invalid CMA message: "+t[0].stack)}}]),t}(f.default);t.default=m},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.CmaMessage=function(){function e(t,n,r){i(this,e),this.ID=parseInt(t),this.TITLE=n,this.TEXT=r,this.OPTIONS=[]}return o(e,[{key:"setOptions",value:function(e){this.OPTIONS=e}}]),e}(),t.jsonSchema={$schema:"http://json-schema.org/draft-06/schema#",properties:{MESSAGE:{$id:"/properties/MESSAGE",type:"object",properties:{ID:{$id:"/properties/MESSAGE/properties/ID",type:"integer",title:"The Id Schema ",enum:[101]},TITLE:{$id:"/properties/MESSAGE/properties/TITLE",type:"string",title:"The Title Schema ",examples:["Message 1 Title"]},TEXT:{$id:"/properties/MESSAGE/properties/TEXT",type:"string",title:"The Text Schema ",examples:["New message 1"]},OPTIONS:r({$id:"/properties/MESSAGE/properties/OPTIONS",type:"array",items:r({$id:"/properties/MESSAGE/properties/OPTIONS/items",type:"object",properties:{ID:{$id:"/properties/MESSAGE/properties/OPTIONS/items/properties/ID",type:"integer",title:"The Id Schema ",examples:[0],enum:[0,103,104,105]},ACTION:{$id:"/properties/MESSAGE/properties/OPTIONS/items/properties/ACTION",type:"string",title:"The Action Schema ",examples:["https://cb.oper.com/B4711?sid=34754"]},BODY:{$id:"/properties/MESSAGE/properties/OPTIONS/items/properties/BODY",type:"string",title:"The Body Schema ",examples:["OK"]}},required:["ID","ACTION","BODY"]},"type","object"),minItems:0},"type","array")}}},required:["ID","TITLE","TEXT"],type:"object"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.ID=parseInt(t),this.ACTION=n,this.BODY=i};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return!!e&&e.getElementsByTagName("SESSIONTIME").length>0}function c(e){var t=new Array;return e.map(function(e){if("#text"!==e.nodeName){var n=e.getAttribute("id"),r=e.getAttribute("action"),i=e.childNodes[0].nodeValue;t.push(new m.default(n,r,i))}}),t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(31),h=r(f),d=n(71),p=n(72),m=r(p),g=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"getMessageFromXml",value:function(){if(s(this.messageNode))return null;try{var e=this.messageNode.getAttribute("id"),t=void 0;this.messageNode.getElementsByTagName("TYPE").length>0&&(t=this.messageNode.getElementsByTagName("TYPE")[0].childNodes[0].nodeValue);var n=this.messageNode.getElementsByTagName("TITLE")[0].childNodes[0].nodeValue,r=this.messageNode.getElementsByTagName("TEXT")[0].childNodes[0].nodeValue,i=new d.RcMessage(e,t,n,r);if(this.messageNode.getElementsByTagName("OPTIONS").length>0){var o=Array.from(this.messageNode.getElementsByTagName("OPTIONS")[0].childNodes);i.setOptions(c(o))}return i}catch(e){throw new Error("RC Message XML is not valid: "+e.message)}}},{key:"validateMessage",value:function(e){var t=this.validator.validate(e,d.jsonSchema).errors;if(0!==t.length)throw new Error("Invalid RC message: "+t[0].stack)}}]),t}(h.default);t.default=g},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.RcMessage=function(){function e(t,n,r,o){i(this,e),this.ID=parseInt(t),this.TYPE=n,this.TITLE=r,this.TEXT=o,this.OPTIONS=[]}return o(e,[{key:"setOptions",value:function(e){this.OPTIONS=e}}]),e}(),t.jsonSchema={$schema:"http://json-schema.org/draft-06/schema#",properties:{MESSAGE:{$id:"/properties/MESSAGE",type:"object",properties:{ID:{$id:"/properties/MESSAGE/properties/ID",type:"integer",title:"The Id Schema ",enum:[100]},TYPE:{$id:"/properties/MESSAGE/properties/TYPE",type:"string",title:"The Type Schema ",examples:["REALITYCHECK_UK"]},TITLE:{$id:"/properties/MESSAGE/properties/TITLE",type:"string",title:"The Title Schema ",examples:["Message Title 1"]},TEXT:{$id:"/properties/MESSAGE/properties/TEXT",type:"string",title:"The Text Schema ",examples:["New message 1"]},OPTIONS:r({$id:"/properties/MESSAGE/properties/OPTIONS",type:"array",items:r({$id:"/properties/MESSAGE/properties/OPTIONS/items",type:"object",properties:{ID:{$id:"/properties/MESSAGE/properties/OPTIONS/items/properties/ID",type:"integer",title:"The Id Schema ",examples:[100],enum:[0,100,101,102,103]},ACTION:{$id:"/properties/MESSAGE/properties/OPTIONS/items/properties/ACTION",type:"string",title:"The Action Schema ",examples:["https://cb.oper.com/B4711?sid=34754"]},BODY:{$id:"/properties/MESSAGE/properties/OPTIONS/items/properties/BODY",type:"string",title:"The Body Schema ",examples:["OK"]}},required:["ID","ACTION","BODY"]},"type","object"),minItems:0},"type","array")}}},required:["ID","TITLE","TEXT"],type:"object"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){r(this,e),this.ID=parseInt(t),this.ACTION=n,this.BODY=i};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t.UrlUtil=function(){function e(){r(this,e)}return i(e,null,[{key:"addParametersToUrl",value:function(e,t){for(var n in t){var r=n+"="+encodeURIComponent(t[n]),i="&";if(e.indexOf("?")<0)i="?";else{var o=e.slice(-1);"&"==o&&(i=""),"?"==o&&(i="")}e+=i+r}return e}},{key:"getSearchParameterByName",value:function(e,t){if("string"!=typeof e)throw new Error("gcmBridge.getSearchParameterByName: Invalid argument name - not a string");if("string"!=typeof t)throw new Error("gcmBridge.getSearchParameterByName: Invalid argument search - not a string");var n,r;return n=new RegExp("[?&]"+e+"=([^&]*)"),r=n.exec(t),r&&r.length>1?decodeURIComponent(r[1].replace(/\+/g," ")):null}},{key:"updateSearchParameterByName",value:function(t,n,r){var i=e.getSearchParameterByName(t,r),o=r;return i&&(o=r.replace(t+"="+i,t+"="+n)),o}},{key:"getGCMParams",value:function(e){var t={};if(null!=e){var n=decodeURIComponent(e).split("|"),r=0;for(r=0;r<n.length;r++){var i=n[r].split("="),o=i[0];o=o.replace("gcm",""),o=o.charAt(0).toLowerCase()+o.slice(1),t[o]=i[1]}}return t}},{key:"updateGCMParams",value:function(t,n,r){var i="",o=new Array,a=e.getSearchParameterByName("gcmParams",r);if(null!=a){o=e.getGCMParams(a);var s=t.replace("gcm","");s=s.charAt(0).toLowerCase()+s.slice(1),i=o[s]}var c=r;return i&&(c=r.replace(t+"%3D"+i,t+"%3D"+n)),c}},{key:"getUrlParams",value:function(){var t={},n=e.getSearchParameterByName("gcmParams",window.parent.location.href);return n?t=e.getGCMParams(n):(t.gameName=e.getSearchParameterByName("gameName",window.location.search),t.playMode=e.getSearchParameterByName("playMode",window.location.search),t.channel=e.getSearchParameterByName("channel",window.location.search)),t}},{key:"getLaunchParamsObj",value:function(e){var t={};if(null!=e){var n=decodeURIComponent(e).split("&"),r=0;for(r=0;r<n.length;r++){var i=n[r].split("="),o=i[0];o=o.charAt(0).toLowerCase()+o.slice(1),t[o]=i[1]}}return t}},{key:"checkURIIsRelative",value:function(e){if("string"!=typeof e)throw new Error("UrlUtil.checkURIIsRelative: Invalid argument url - not a string");return!/^([a-z0-9+.-]+):\/\//.test(e)&&(!/^\/\//.test(e)&&/^[a-zA-Z0-9\/\.\-_]*$/.test(e))}},{key:"getAllParams",value:function(e,t){var n=[],r=null;r=t?e.substring(1).split("&"):e.slice(e.indexOf("?")+1).split("&");for(var i=r.length-1;i>=0;i--){var o=r[i].split("=");n.push(o)}return n}}]),e}(),a=new o;t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GameSparksHandler=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(33),s=r(a),c=n(100),u=r(c),l=t.GameSparksHandler=function(){function e(){i(this,e),this.gameSparks=new s.default,this.gameSparksEvents=new u.default,this.gcmOrigin=null}return o(e,[{key:"init",value:function(e,t,n,r,i){this.gcmOrigin=e.launcherOrigin,console.log("GameSparks initialization."),this.gameSparksEvents.setNotificationHandle(n),r.challengeNotificationHandler&&this.gameSparksEvents.setChallengesNotificationHandler(r.challengeNotificationHandler);var o=this.buildGamesparksConfig(i);void 0!==i.mode&&"live"===i.mode?this.gameSparks.initLive(o):this.gameSparks.initPreview(o),this.gameSparksEvents.setGameName(t.ogsgameid),this.gameSparksEvents.setGameSparks(this.gameSparks),this.gameSparksEvents.setOgsParams(t),this.gameSparksEvents.setOpConfig(i)}},{key:"onChallengePlayerAction",value:function(e){this.gameSparksEvents.onChallengePlayerAction(e)}},{key:"onMissionPlayerAction",value:function(e){this.gameSparksEvents.onMissionPlayerAction(e)}},{key:"onGetServerTime",value:function(){this.gameSparksEvents.onGetServerTime()}},{key:"buildGamesparksConfig",value:function(e){return{key:e.apiKey,onNonce:this.gameSparksEvents.onNonce.bind(this.gameSparksEvents),onInit:this.gameSparksEvents.onInit.bind(this.gameSparksEvents),onMessage:this.gameSparksEvents.onMessage.bind(this.gameSparksEvents),logger:console.log}}}]),e}(),f=new l;t.default=f},function(e,t,n){"use strict";var r,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"function"==typeof Symbol&&a(Symbol.iterator);!function(a,s){i=[n(34),n(99)],r=s,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,function(e,t){var n=function(){};return n.prototype={init:function(e){this.options=e,this.socketUrl=e.url,this.pendingRequests={},this.requestCounter=0,this.connect()},buildServiceUrl:function(e,t){var n,r,i,o=t.key;return n=e?"live":"preview",r=t.credential&&0!==t.credential.length?t.credential:"device",t.secret&&(i=t.secret.indexOf(":"))>0&&(r="secure",o=t.secret.substr(0,i)+"/"+o),"wss://"+n+"-"+o+".ws.gamesparks.net/ws/"+r+"/"+o},initPreview:function(e){e.url=this.buildServiceUrl(!1,e),this.init(e)},initLive:function(e){e.url=this.buildServiceUrl(!0,e),this.init(e)},reset:function(){this.initialised=!1,this.connected=!1,this.error=!1,this.disconnected=!1,null!=this.webSocket&&(this.webSocket.onclose=null,this.webSocket.close())},connect:function(){this.reset();try{this.webSocket=new t(this.socketUrl),this.webSocket.onopen=this.onWebSocketOpen.bind(this),this.webSocket.onclose=this.onWebSocketClose.bind(this),this.webSocket.onerror=this.onWebSocketError.bind(this),this.webSocket.onmessage=this.onWebSocketMessage.bind(this)}catch(e){this.log(e.message)}},disconnect:function(){this.webSocket&&this.connected&&(this.disconnected=!0,this.webSocket.close())},onWebSocketOpen:function(e){this.log("WebSocket onOpen"),this.options.onOpen&&this.options.onOpen(e),this.connected=!0},onWebSocketClose:function(e){this.log("WebSocket onClose"),this.options.onClose&&this.options.onClose(e),this.connected=!1,this.error||this.disconnected||this.connect()},onWebSocketError:function(e){this.log("WebSocket onError: Sorry, but there is some problem with your socket or the server is down"),this.options.onError&&this.options.onError(e),this.socketUrl=this.options.url,this.error=!0},onWebSocketMessage:function(e){this.log("WebSocket onMessage: "+e.data);var t;try{t=JSON.parse(e.data)}catch(t){return void this.log("An error ocurred while parsing the JSON Data: "+e+"; Error: "+t)}this.options.onMessage&&this.options.onMessage(t),t.authToken&&(this.authToken=t.authToken,delete t.authToken),t.connectUrl&&(this.socketUrl=t.connectUrl,this.connect());var n=t["@class"];if(".AuthenticatedConnectResponse"===n)this.handshake(t);else if(n.match(/Response$/)&&t.requestId){var r=t.requestId;delete t.requestId,this.pendingRequests[r]&&(this.pendingRequests[r](t),this.pendingRequests[r]=null)}},handshake:function(t){if(t.nonce){var n;this.options.onNonce?n=this.options.onNonce(t.nonce):this.options.secret&&(n=e.enc.Base64.stringify(e.HmacSHA256(t.nonce,this.options.secret)));var r={"@class":".AuthenticatedConnectRequest",hmac:n};this.authToken&&(r.authToken=this.authToken),this.sessionId&&(r.sessionId=this.sessionId);var i=this.getBrowserData();r.platform=i.browser,r.os=i.operatingSystem,this.webSocketSend(r)}else t.sessionId&&(this.sessionId=t.sessionId,this.initialised=!0,this.options.onInit&&this.options.onInit(),this.keepAliveInterval=window.setInterval(this.keepAlive.bind(this),3e4))},keepAlive:function(){this.initialised&&this.connected&&this.webSocket.send(" ")},send:function(e,t){this.sendWithData(e,{},t)},sendWithData:function(e,t,n){if(!this.initialised)return void n({error:"NOT_INITIALISED"});0!==e.indexOf(".")&&(e="."+e),t["@class"]=e,t.requestId=(new Date).getTime()+"_"+ ++this.requestCounter,null!=n&&(this.pendingRequests[t.requestId]=n,setTimeout(function(){this.pendingRequests[t.requestId]&&this.pendingRequests[t.requestId]({error:"NO_RESPONSE"})}.bind(this),32e3)),this.webSocketSend(t)},webSocketSend:function(e){this.options.onSend&&this.options.onSend(e);var t=JSON.stringify(e);this.log("WebSocket send: "+t),this.webSocket.send(t)},getSocketUrl:function(){return this.socketUrl},getSessionId:function(){return this.sessionId},getAuthToken:function(){return this.authToken},setAuthToken:function(e){this.authToken=e},isConnected:function(){return this.connected},log:function(e){this.options.logger&&this.options.logger(e)},getBrowserData:function(){function e(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;if(n){if(-1!==n.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}}var t=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],n=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];return{browser:e(t),operatingSystem:e(n)}}},n})},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,n=t.lib,r=n.WordArray,i=r.init;(r.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;i.call(this,n,t)}else i.apply(this,arguments)}).prototype=r}}(),e.lib.WordArray})},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){return function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var n=e,r=n.lib,i=r.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return i.create(n,2*t)}};o.Utf16LE={stringify:function(e){for(var n=e.words,r=e.sigBytes,i=[],o=0;o<r;o+=2){var a=t(n[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=t(e.charCodeAt(o)<<16-o%2*16);return i.create(r,2*n)}}}(),e.enc.Utf16})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(35))}(0,function(e){return function(){var t=e,n=t.lib,r=n.WordArray,i=t.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(a),t.HmacSHA224=o._createHmacHelper(a)}(),e.SHA224})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(13),n(36))}(0,function(e){return function(){var t=e,n=t.x64,r=n.Word,i=n.WordArray,o=t.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(13))}(0,function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64,s=a.Word,c=n.algo,u=[],l=[],f=[];!function(){for(var e=1,t=0,n=0;n<24;n++){u[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5,i=(2*e+3*t)%5;e=r,t=i}for(var e=0;e<5;e++)for(var t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,a=0;a<24;a++){for(var c=0,h=0,d=0;d<7;d++){if(1&o){var p=(1<<d)-1;p<32?h^=1<<p:c^=1<<p-32}128&o?o=o<<1^113:o<<=1}f[a]=s.create(c,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=s.create()}();var d=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s=n[i];s.high^=a,s.low^=o}for(var c=0;c<24;c++){for(var d=0;d<5;d++){for(var p=0,m=0,g=0;g<5;g++){var s=n[d+5*g];p^=s.high,m^=s.low}var v=h[d];v.high=p,v.low=m}for(var d=0;d<5;d++)for(var y=h[(d+4)%5],E=h[(d+1)%5],S=E.high,b=E.low,p=y.high^(S<<1|b>>>31),m=y.low^(b<<1|S>>>31),g=0;g<5;g++){var s=n[d+5*g];s.high^=p,s.low^=m}for(var _=1;_<25;_++){var s=n[_],O=s.high,w=s.low,C=u[_];if(C<32)var p=O<<C|w>>>32-C,m=w<<C|O>>>32-C;else var p=w<<C-32|O>>>64-C,m=O<<C-32|w>>>64-C;var I=h[l[_]];I.high=p,I.low=m}var T=h[0],A=n[0];T.high=A.high,T.low=A.low;for(var d=0;d<5;d++)for(var g=0;g<5;g++){var _=d+5*g,s=n[_],R=h[_],k=h[(d+1)%5+5*g],N=h[(d+2)%5+5*g];s.high=R.high^~k.high&N.high,s.low=R.low^~k.low&N.low}var s=n[0],P=f[c];s.high^=P.high,s.low^=P.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,u=[],l=0;l<c;l++){var f=a[l],h=f.high,d=f.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(h)}return new i.init(u,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=o._createHelper(d),n.HmacSHA3=o._createHmacHelper(d)}(Math),e.SHA3})},function(e,t,n){!function(r,i){e.exports=t=i(n(0))}(0,function(e){/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
return function(t){function n(e,t,n){return e^t^n}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function a(e,t,n){return e^(t|~n)}function s(e,t){return e<<t|e>>>32-t}var c=e,u=c.lib,l=u.WordArray,f=u.Hasher,h=c.algo,d=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),v=l.create([0,1518500249,1859775393,2400959708,2840853838]),y=l.create([1352829926,1548603684,1836072691,2053994217,0]),E=h.RIPEMD160=f.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var c=0;c<16;c++){var u=t+c,l=e[u];e[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var f,h,E,S,b,_,O,w,C,I,T=this._hash.words,A=v.words,R=y.words,k=d.words,N=p.words,P=m.words,M=g.words;_=f=T[0],O=h=T[1],w=E=T[2],C=S=T[3],I=b=T[4];for(var U,c=0;c<80;c+=1)U=f+e[t+k[c]]|0,U+=c<16?n(h,E,S)+A[0]:c<32?r(h,E,S)+A[1]:c<48?i(h,E,S)+A[2]:c<64?o(h,E,S)+A[3]:a(h,E,S)+A[4],U|=0,U=s(U,P[c]),U=U+b|0,f=b,b=S,S=s(E,10),E=h,h=U,U=_+e[t+N[c]]|0,U+=c<16?a(O,w,C)+R[0]:c<32?o(O,w,C)+R[1]:c<48?i(O,w,C)+R[2]:c<64?r(O,w,C)+R[3]:n(O,w,C)+R[4],U|=0,U=s(U,M[c]),U=U+I|0,_=I,I=C,C=s(w,10),w=O,O=U;U=T[1]+E+C|0,T[1]=T[2]+S+I|0,T[2]=T[3]+b+_|0,T[3]=T[4]+f+O|0,T[4]=T[0]+h+w|0,T[0]=U},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=f.clone.call(this);return e._hash=this._hash.clone(),e}});c.RIPEMD160=f._createHelper(E),c.HmacRIPEMD160=f._createHmacHelper(E)}(Math),e.RIPEMD160})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(20),n(21))}(0,function(e){return function(){var t=e,n=t.lib,r=n.Base,i=n.WordArray,o=t.algo,a=o.SHA1,s=o.HMAC,c=o.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=s.create(n.hasher,e),o=i.create(),a=i.create([1]),c=o.words,u=a.words,l=n.keySize,f=n.iterations;c.length<l;){var h=r.update(t).finalize(a);r.reset();for(var d=h.words,p=d.length,m=h,g=1;g<f;g++){m=r.finalize(m),r.reset();for(var v=m.words,y=0;y<p;y++)d[y]^=v[y]}o.concat(h),u[0]++}return o.sigBytes=4*l,o}});t.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),e.PBKDF2})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.mode.CFB=function(){function t(e,t,n,r){var i=this._iv;if(i){var o=i.slice(0);this._iv=void 0}else var o=this._prevBlock;r.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}var n=e.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i,r),this._prevBlock=e.slice(n,n+i)}}),n.Decryptor=n.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);t.call(this,e,n,i,r),this._prevBlock=o}}),n}(),e.mode.CFB})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}});return t.Decryptor=n,t}(),e.mode.CTR})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
return e.mode.CTRGladman=function(){function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var r=e.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),n(a);var s=a.slice(0);r.encryptBlock(s,0);for(var c=0;c<i;c++)e[t+c]^=s[c]}});return r.Decryptor=i,r}(),e.mode.CTRGladman})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}});return t.Decryptor=n,t}(),e.mode.OFB})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.pad.Iso10126={pad:function(t,n){var r=4*n,i=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e.pad.ZeroPadding})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(1))}(0,function(e){return function(t){var n=e,r=n.lib,i=r.CipherParams,o=n.enc,a=o.Hex,s=n.format;s.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return i.create({ciphertext:t})}}}(),e.format.Hex})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(5),n(6),n(3),n(1))}(0,function(e){return function(){var t=e,n=t.lib,r=n.BlockCipher,i=t.algo,o=[],a=[],s=[],c=[],u=[],l=[],f=[],h=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=0,r=0,t=0;t<256;t++){var i=r^r<<1^r<<2^r<<3^r<<4;i=i>>>8^255&i^99,o[n]=i,a[i]=n;var m=e[n],g=e[m],v=e[g],y=257*e[i]^16843008*i;s[n]=y<<24|y>>>8,c[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,l[n]=y;var y=16843009*v^65537*g^257*m^16843008*n;f[i]=y<<24|y>>>8,h[i]=y<<16|y>>>16,d[i]=y<<8|y>>>24,p[i]=y,n?(n=m^e[e[e[v^m]]],r^=e[e[r]]):n=r=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],g=i.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=this._nRounds=n+6,i=4*(r+1),a=this._keySchedule=[],s=0;s<i;s++)if(s<n)a[s]=t[s];else{var c=a[s-1];s%n?n>6&&s%n==4&&(c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c]):(c=c<<8|c>>>24,c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c],c^=m[s/n|0]<<24),a[s]=a[s-n]^c}for(var u=this._invKeySchedule=[],l=0;l<i;l++){var s=i-l;if(l%4)var c=a[s];else var c=a[s-4];u[l]=l<4||s<=4?c:f[o[c>>>24]]^h[o[c>>>16&255]]^d[o[c>>>8&255]]^p[o[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,c,u,l,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,f,h,d,p,a);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],h=e[t+3]^n[3],d=4,p=1;p<c;p++){var m=r[u>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&h]^n[d++],g=r[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&u]^n[d++],v=r[f>>>24]^i[h>>>16&255]^o[u>>>8&255]^a[255&l]^n[d++],y=r[h>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&f]^n[d++];u=m,l=g,f=v,h=y}var m=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[d++],g=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^n[d++],v=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[d++],y=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[d++];e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=y},keySize:8});t.AES=r._createHelper(g)}(),e.AES})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(5),n(6),n(3),n(1))}(0,function(e){return function(){function t(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function n(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var r=e,i=r.lib,o=i.WordArray,a=i.BlockCipher,s=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=a.extend({_doReset:function(){for(var e=this._key,t=e.words,n=[],r=0;r<56;r++){var i=c[r]-1;n[r]=t[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],a=0;a<16;a++){for(var s=o[a]=[],f=l[a],r=0;r<24;r++)s[r/6|0]|=n[(u[r]-1+f)%28]<<31-r%6,s[4+(r/6|0)]|=n[28+(u[r+24]-1+f)%28]<<31-r%6;s[0]=s[0]<<1|s[0]>>>31;for(var r=1;r<7;r++)s[r]=s[r]>>>4*(r-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var h=this._invSubKeys=[],r=0;r<16;r++)h[r]=o[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,r,i){this._lBlock=e[r],this._rBlock=e[r+1],t.call(this,4,252645135),t.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),t.call(this,1,1431655765);for(var o=0;o<16;o++){for(var a=i[o],s=this._lBlock,c=this._rBlock,u=0,l=0;l<8;l++)u|=f[l][((c^a[l])&h[l])>>>0];this._lBlock=c,this._rBlock=s^u}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,t.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[r]=this._lBlock,e[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=a._createHelper(d);var p=s.TripleDES=a.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=d.createEncryptor(o.create(t.slice(0,2))),this._des2=d.createEncryptor(o.create(t.slice(2,4))),this._des3=d.createEncryptor(o.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});r.TripleDES=a._createHelper(p)}(),e.TripleDES})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(5),n(6),n(3),n(1))}(0,function(e){return function(){function t(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){t=(t+1)%256,n=(n+e[t])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}var n=e,r=n.lib,i=r.StreamCipher,o=n.algo,a=o.RC4=i.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;for(var i=0,o=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var c=r[i];r[i]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,n){e[n]^=t.call(this)},keySize:8,ivSize:0});n.RC4=i._createHelper(a);var s=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});n.RC4Drop=i._createHelper(s)}(),e.RC4})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(5),n(6),n(3),n(1))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,o=r>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,u=((4294901760&r)*r|0)+((65535&r)*r|0);c[n]=a^u}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n=e,r=n.lib,i=r.StreamCipher,o=n.algo,a=[],s=[],c=[],u=o.Rabbit=i.extend({_doReset:function(){for(var e=this._key.words,n=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)t.call(this);for(var r=0;r<8;r++)o[r]^=i[r+4&7];if(n){var a=n.words,s=a[0],c=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;o[0]^=u,o[1]^=f,o[2]^=l,o[3]^=h,o[4]^=u,o[5]^=f,o[6]^=l,o[7]^=h;for(var r=0;r<4;r++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[n+i]^=a[i]},blockSize:4,ivSize:2});n.Rabbit=i._createHelper(u)}(),e.Rabbit})},function(e,t,n){!function(r,i,o){e.exports=t=i(n(0),n(5),n(6),n(3),n(1))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,o=r>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,u=((4294901760&r)*r|0)+((65535&r)*r|0);c[n]=a^u}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n=e,r=n.lib,i=r.StreamCipher,o=n.algo,a=[],s=[],c=[],u=o.RabbitLegacy=i.extend({_doReset:function(){var e=this._key.words,n=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)t.call(this);for(var o=0;o<8;o++)i[o]^=r[o+4&7];if(n){var a=n.words,s=a[0],c=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),f=u>>>16|4294901760&l,h=l<<16|65535&u;i[0]^=u,i[1]^=f,i[2]^=l,i[3]^=h,i[4]^=u,i[5]^=f,i[6]^=l,i[7]^=h;for(var o=0;o<4;o++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[n+i]^=a[i]},blockSize:4,ivSize:2});n.RabbitLegacy=i._createHelper(u)}(),e.RabbitLegacy})},function(e,t,n){"use strict";(function(r){var i;(function(){var o=r.WebSocket||r.MozWebSocket;void 0!==(i=function(){return o}.call(t,n,t,e))&&(e.exports=i)}).call(void 0)}).call(t,n(12))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e+"/register"}function a(e,t){return p.default.post(e,t).then(function(e){return console.log("response: "+JSON.stringify(e.data)),e.data}).catch(function(e){throw e})}function s(e){return e+"/getauthkey"}function c(e,t){return p.default.post(e,t).then(function(e){return console.log("response: "+JSON.stringify(e.data)),e.data}).catch(function(e){throw e})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(101),f=r(l),h=(n(10),n(4)),d=n(22),p=r(d),m=n(33),g=(r(m),function(){function e(){i(this,e),this.gameSparks=null,this.gameName=null,this.notificationHandler_=null,this.challengesNotificationHandler=null,this.ogsParams=null,this.opConfig=null}return u(e,[{key:"setNotificationHandle",value:function(e){this.notificationHandler_=e}},{key:"setChallengesNotificationHandler",value:function(e){this.challengesNotificationHandler=e}},{key:"setGameSparks",value:function(e){this.gameSparks=e}},{key:"setGameName",value:function(e){this.gameName=e}},{key:"setOgsParams",value:function(e){this.ogsParams=e}},{key:"setOpConfig",value:function(e){this.opConfig=e}},{key:"onNonce",value:function(e){var t=this;return c(s(this.opConfig.gsUrl),{nonce:e,operatorid:this.ogsParams.operatorid}).then(function(e){if(void 0===e.authKey)throw Error("GS Authentication has been failed.");t.gameSparks.sendAuthConnectWithHmac(e.authKey)}).catch(function(e){console.error(e),t.gameSparks.disconnect()})}},{key:"onInit",value:function(){var e=this;console.log("GameSparks onInit"),this.registerPlayer().then(function(t){e.authenticatePlayer(t)}).catch(function(t){console.error(t),e.gameSparks.disconnect()})}},{key:"registerPlayer",value:function(){var e={sessionid:this.ogsParams.sessionid,operatorid:this.ogsParams.operatorid,gameid:this.gameName};return a(o(this.opConfig.gsUrl),e).then(function(e){if(console.log("response: "+JSON.stringify(e)),void 0!==e.responseStatus&&"OK"==e.responseStatus)return new f.default(e.cau,e.cap);throw Error("GS Registration has been failed.")}).catch(function(e){throw console.error(e),Error("GS Registration has been failed.")})}},{key:"authenticatePlayer",value:function(e){var t={userName:e.userName,password:e.password};this.gameSparks.sendWithData("AuthenticationRequest",t,this.onAuthenticate.bind(this))}},{key:"onMessage",value:function(e){console.log("gamesparks onMessage "+JSON.stringify(e)),e&&e.data&&("Missions"===e.data.FEATURE?("MissionStartJoinedMissionComplete"==e.extCode||"MissionStartJoinedMissionCompleteWithReward"==e.extCode?e.extCode="missionComplete":e.extCode.startsWith("Mission")&&(e.extCode="missionStatus"),void 0===e.extCode||"badgeWon"!==e.extCode&&"missionComplete"!==e.extCode&&"missionStatus"!==e.extCode||this.notificationHandler_.handleNotification(new h.GCMNotification(h.GCMNotification.TYPE.GS_MESSAGE,e))):"Challenges"===e.data.FEATURE?this.challengesNotificationHandler(e):void 0!==e.error&&(console.error("GameSparks error: "+JSON.stringify(e)),".AuthenticationResponse"!==e["@class"]&&".AuthenticatedConnectResponse"!==e["@class"]||this.gameSparks.disconnect()))}},{key:"onAuthenticate",value:function(e){if(void 0!==e.userId){var t="en";void 0!=this.ogsParams.lang&&""!=this.ogsParams.lang&&null!=this.ogsParams.lang&&(t=this.ogsParams.lang.split("_")[0]);var n={eventKey:"FEATURE_STATUS",gameName:this.gameName,operatorId:parseInt(this.ogsParams.operatorid),playerCurrency:this.ogsParams.currency,lang:t};this.gameSparks.sendWithData("LogEventRequest",n,this.onMessage.bind(this))}console.log("onAuthenticate: "+JSON.stringify(e))}},{key:"onChallengePlayerAction",value:function(e){if(e){var t={eventKey:"TOURNAMENT_ACTION",action:e,gameName:this.gameName,operatorId:parseInt(this.ogsParams.operatorid)};this.gameSparks.sendWithData("LogEventRequest",t,this.onMessage.bind(this))}console.log("On Challenge Player Action ",e," => ",JSON.stringify(e))}},{key:"onMissionPlayerAction",value:function(e){if(e){var t={eventKey:"MISSION_ACTION",action:e,gameName:this.gameName,operatorId:parseInt(this.ogsParams.operatorid)};this.gameSparks.sendWithData("LogEventRequest",t,this.onMessage.bind(this))}console.log("On Mission Player Action ",e," => ",JSON.stringify(e))}},{key:"onGetServerTime",value:function(){var e={eventKey:"GET_TIME"};this.gameSparks.sendWithData("LogEventRequest",e,this.onMessage.bind(this)),console.log("Get Server Timestamp")}}]),e}());t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n){r(this,e),this.userName=t,this.password=n};t.default=i},function(e,t,n){"use strict";function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(2),o=n(37),a=n(104),s=n(23),c=r(s);c.Axios=a,c.create=function(e){return r(i.merge(s,e))},c.Cancel=n(41),c.CancelToken=n(118),c.isCancel=n(40),c.all=function(e){return Promise.all(e)},c.spread=n(119),e.exports=c,e.exports.default=c},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(23),o=n(2),a=n(113),s=n(114);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(39);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(2);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(2),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,c=o;i.charAt(0|s)||(c="=",s%1);a+=c.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(2);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(2),o=n(115),a=n(40),s=n(23),c=n(116),u=n(117);e.exports=function(e){return r(e),e.baseURL&&!c(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(41);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LiveServHandler=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(121),a=n(4),s=n(134),c={SJPWIN:"SJPWIN"},u=t.LiveServHandler=function(){function e(){r(this,e),this.gcmStorage=new s.GcmStorage}return i(e,[{key:"init",value:function(e,t,n,r){this.gcm_=e,this.notificationHandler=t,this.liveServConnection=this.createLiveServConnection(n,r.authToken),this.autheticateToLiveServ(r.authToken),this.subscribeToLiveServChannel(r.channelId,this.handleLiveServNotification.bind(this))}},{key:"createLiveServConnection",value:function(e,t){return new o.LiveServConnection(e,t)}},{key:"autheticateToLiveServ",value:function(e){this.liveServConnection.authenticate(e)}},{key:"subscribeToLiveServChannel",value:function(e,t){this.liveServConnection.subscribe(e,t)}},{key:"handleLiveServNotification",value:function(e){if(console.log("received message %o",e),e&&e.subject)if(e.subject.startsWith(c.SJPWIN)){console.log(a.GCMNotification.TYPE.SYNDICATED_JACKPOT_WIN_AWARD,e.payload);var t=new a.GCMNotification(a.GCMNotification.TYPE.SYNDICATED_JACKPOT_PROGRESS_BAR,{});this.notificationHandler.disposeNotification(t),this.gcmStorage.hasSyndicatedMessageBeenShow(e.msg_id)||(this.gcm_.syndicateJackpotWinAwardDialogIsOpen=!0,this.notificationHandler.handleNotification(new a.GCMNotification(a.GCMNotification.TYPE.SYNDICATED_JACKPOT_WIN_AWARD,e.payload)),this.gcmStorage.appendShownSyndicationMessage(e.msg_id))}else console.log("Unknown Notification")}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LiveServConnection=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(122),a=t.LiveServConnection=function(){function e(t,n){var i=this;r(this,e);try{this.client=new o.LiveServ([t.url],n,{retries:t.retries,cooldownSeconds:t.cooldownSeconds,maxRetryDelaySeconds:t.maxRetryDelaySeconds},2),this.client.watchConnectionState(function(e){return i.watchConnection(e)})}catch(e){console.log(e)}}return i(e,[{key:"authenticate",value:function(e){this.client&&this.client.authenticate(e)}},{key:"subscribe",value:function(e,t){null!=this.client&&this.client.subscribe([e],function(e){return t(e)},"!!!!!!!!!!")}},{key:"watchConnection",value:function(e){console.log(e)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveServ=void 0;var r=n(123),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={LiveServ:i.default},t.LiveServ=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(124),c=n(16),u=r(c),l=n(132),f=r(l),h=n(14),d=n(133),p=n(9),m=r(p),g=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o(this,e),this.subscribedChannels=new Map,this.connectionStateWatchers=[],this.nextSubscriptionRef=0,this.handleConnected=function(){m.default.info("connection established, requesting channels %o are subscribed to",i.subscribedChannels),i.connectionManager.send((0,d.buildChannelsRequest)(i.subscribedChannels)),i.announceConnectionState(l.ConnectionStatus.CONNECTED)},this.handleDisconnected=function(){i.announceConnectionState(l.ConnectionStatus.CONNECTING)},this.handleMessage=function(e){var t=e.channel,n=e.msg_id;if(!i.subscribedChannels.get(t))return void m.default.info("received message on a channel with no subscriptions, ignoring");i.subscribedChannels.get(t).lastMsgId=n,i.subscribedChannels.get(t).listeners.forEach(function(n){try{n(Object.assign({},e))}catch(n){m.default.info("channel %s listener threw exception when processing message %o",t,e)}})},this.configuration=new s.Configuration({servers:t,version:a,connection:r}),this.connectionManager=new f.default(this.configuration,n).on(u.default.CONNECTED,this.handleConnected).on(u.default.DISCONNECTED,this.handleDisconnected).on(u.default.MESSAGE,this.handleMessage).open(),"undefined"!=typeof window&&(window.localStorage&&window.localStorage.getItem("openbet-liveserv-client")?(window.__OpenbetLiveServClient__=this,m.default.info("attached to window.__OpenbetLiveServClient__ for debugging")):m.default.info("for debug access to openbet-liveserv-client create a localStorage key 'openbet-liveserv-client' to '1' and reload; window.__OpenbetLiveServClient__ will then be available for inspection"))}return a(e,[{key:"authenticate",value:function(e){this.connectionManager.setAuthToken(e)}},{key:"deauthenticate",value:function(){this.connectionManager.clearAuthToken()}},{key:"subscribe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this,n=arguments[1],r=arguments[2],i=[],o=[],a="~"+this.nextSubscriptionRef++;if(m.default.info("subscribing to %o with subscriptionRef %s from %s",e,a,r),e.forEach(function(e){if(t.subscribedChannels.has(e)){var s=t.subscribedChannels.get(e);s.refCount++,s.listeners.set(a,n),s.lastMsgId>r?(o.push(e),i.push(e),s.lastMsgId=r):m.default.info("existing subscription for %s can be utilised without needing older messages",e)}else{var c={channel:e,refCount:1,lastMsgId:r,listeners:new Map};c.listeners.set(a,n),t.subscribedChannels.set(e,c),i.push(e)}}),this.connectionManager.ok&&(i.length||o.length)){var s="";o.length&&(s+=h.MessageBuilder.formatUnsubscribeRequest(o)),s+=h.MessageBuilder.formatSubscribeRequest(i,r),this.connectionManager.send(s)}return a}},{key:"unsubscribe",value:function(e,t){var n=this;m.default.info("unsubscribing from %o for subscriptionRefs %o",t,e);var r=t.filter(function(t){var r=n.subscribedChannels.get(t);return r?(e.forEach(function(e){r.listeners.delete(e)}),0===r.listeners.size&&(n.subscribedChannels.delete(t),!0)):(m.default.info("No channel subscription exists for "+t+", not unsubscribing"),!1)});r.length>0&&this.connectionManager.send(h.MessageBuilder.formatUnsubscribeRequest(r))}},{key:"unsubscribeAll",value:function(){var e=this;m.default.info("unsubscribing from all channels across all subscriptions"),this.subscribedChannels.forEach(function(t){var n=t.channel,r=t.listeners;e.unsubscribe([].concat(i(r.keys())),[n])})}},{key:"watchConnectionState",value:function(e){this.connectionStateWatchers.push(e),e(this.connectionManager.status)}},{key:"announceConnectionState",value:function(e){this.connectionStateWatchers.forEach(function(t){try{t(e)}catch(e){m.default.info("connection state watcher, %o, threw exception when processing state change event",t)}})}}]),e}();t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=/^((wss?|https?):)?\/\/.+$/;if(!Array.isArray(e))throw new Error("Expected a `servers` argument of type Array but received "+(void 0===e?"undefined":s(e)));return e.map(function(e,n){var r=e.toLowerCase().match(t),i=a(r,3),s=i[0],c=(i[1],i[2]);if(!s)throw new Error("Server values should match "+t.toString()+", e.g. wss://push.example.com/websock, http://push.example.com:8080/liveserv");return{type:o(c),uri:s,connectionAttempts:0,blacklistedUntil:0}}).sort(function(e,t){return e.type===c.TransportType.LongPoll&&t.type===c.TransportType.Websocket?1:0})}function o(e){switch(e){case"ws":case"wss":return c.TransportType.Websocket;case"http":case"https":default:return c.TransportType.LongPoll}}Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(8);t.Configuration=function e(t){var n=t.servers,o=t.version,a=void 0===o?1:o,s=t.connection,c=void 0===s?{retries:10,cooldownSeconds:300,maxRetryDelaySeconds:60}:s;r(this,e),this.servers=i(n),this.version=a,this.connection=c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.TransportType=void 0;!function(e){e.Websocket="websocket",e.LongPoll="longpoll"}(r||(t.TransportType=r={}));var i=t.DisconnectReason=void 0;!function(e){e.ParseError="ParseError",e.PongTimeout="PongTimeout",e.Requested="Requested",e.Expected="Expected",e.BadResponse="BadResponse",e.Gone="Gone"}(i||(t.DisconnectReason=i={}))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return m.CloseCodes[e]||"UNKNOWN"}function a(e,t){return setTimeout(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketTransport=void 0;var s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(14),l=n(16),f=r(l),h=n(8),d=n(9),p=r(d),m={PingInterval:15e3,PongTimeout:2e4,PingBaseId:1e3,MaxPingId:1099,CloseCodes:{1000:"CLOSE_NORMAL",1001:"CLOSE_GOING_AWAY",1002:"CLOSE_PROTOCOL_ERROR",1003:"CLOSE_UNSUPPORTED",1005:"CLOSE_NO_STATUS",1006:"CLOSE_ABNORMAL",1007:"UNSUPPORTED_DATA",1008:"POLICY_VIOLATION",1009:"CLOSE_TOO_LARGE",1010:"MISSING_EXTENSION",1011:"INTERNAL_ERROR",1012:"SERVICE_RESTART",1013:"TRY_AGAIN_LATER",1015:"TLS_HANDSHAKE"}};!function(e){e.Disconnected="DISCONNECTED",e.Connecting="CONNECTING",e.Closing="CLOSING",e.Open="OPEN"}(s||(s={}));var g=0;t.WebsocketTransport=function(){function e(t,n,r,a){var c=this;i(this,e),this.type=h.TransportType.Websocket,this.conId="wscon"+ ++g,this.status=s.Disconnected,this.protocolVersion=1,this.socket=null,this.websocketProtocol="v1.push.openbet.com",this.pingTimer=null,this.pingSendTime=null,this.pingId=m.PingBaseId-1,this.pongWatcher=null,this.connectionEventListeners=new Map,this.authToken=null,this.onopen=function(e){c.status=s.Open,p.default.info("received onopen event on "+c.conId),c.send(u.MessageBuilder.formatConnectRequest(c.type,c.protocolVersion,c.authToken)),c.connectionEventListeners.get(f.default.CONNECTED).forEach(function(t){return t(e)}),c.startPings()},this.onerror=function(e){p.default.info("received onerror event on "+c.conId),c.connectionEventListeners.get(f.default.ERROR).forEach(function(t){return t(e)})},this.onmessage=function(e){var t=u.Parser.parseData(e.data,c.protocolVersion),n=t.ok,r=t.messages;n||(p.default.info("unable to parse messages from data received, disconnecting"),c.disconnect(h.DisconnectReason.ParseError)),r.forEach(function(e){"PONG"===e.type?c.pongReceived(e.pingId):(p.default.info("dispatching parsed message %o",e),c.connectionEventListeners.get(f.default.MESSAGE).forEach(function(t){return t(e)}))})},this.onclose=function(e){var t=e.code;c.status=s.Disconnected,p.default.info("received onclose event on "+c.conId+", "+o(t)),c.cleanup(),c.connectionEventListeners.get(f.default.DISCONNECTED).forEach(function(e){return e(h.DisconnectReason.Gone)})},this.protocolVersion=t,this.uri=n,this.authToken=r,this.origin=a.origin}return c(e,[{key:"on",value:function(e,t){return this.connectionEventListeners.has(e)?this.connectionEventListeners.get(e).push(t):this.connectionEventListeners.set(e,[t]),this}},{key:"connect",value:function(){var e=this;return p.default.info("connecting "+this.conId+" to "+this.uri),this.status=s.Connecting,"undefined"!=typeof window?this.socket=new WebSocket(this.uri,this.websocketProtocol):this.socket=new WebSocket(this.uri,this.websocketProtocol,{origin:this.origin}),this.socket.onopen=function(t){e.onopen(t)},this.socket.onerror=function(t){e.onerror(t)},this.socket.onmessage=function(t){e.onmessage(t)},this.socket.onclose=function(t){e.onclose(t)},this}},{key:"disconnect",value:function(e){p.default.info("disconnecting "+this.conId+" due to "+e),this.status=s.Closing,this.socket&&this.socket.close()}},{key:"send",value:function(e){return this.status===s.Open?(this.socket.send(e),!0):(p.default.info("socket status "+this.status+" so refusing send"),!1)}},{key:"startPings",value:function(){this.sendPing()}},{key:"schedulePing",value:function(){var e=this;this.pingTimer=a(function(){e.sendPing()},m.PingInterval)}},{key:"sendPing",value:function(){if(this.status!==s.Open)return void p.default.info("not sending ping due to current status being "+this.status);this.pingId++,this.pingId>m.MaxPingId&&(this.pingId=m.PingBaseId),this.scheduleNoPongWatcher(),this.pingSendTime=Date.now(),this.send(u.MessageBuilder.formatPingRequest(this.pingId))}},{key:"scheduleNoPongWatcher",value:function(){var e=this;this.pongWatcher=a(function(){var t=(Date.now()-e.pingSendTime)/1e3;p.default.info("no pong for id "+e.pingId+" sent "+t+"s ago"),e.disconnect(h.DisconnectReason.PongTimeout)},m.PongTimeout)}},{key:"pongReceived",value:function(e){if(e!==this.pingId)return void p.default.info("unexpected id "+e+" received in pong response, expected "+this.pingId);this.pongWatcher&&clearTimeout(this.pongWatcher);var t=this.pingSendTime?(Date.now()-this.pingSendTime)/1e3:"UNKNOWN";p.default.info("got pong for id "+e+" sent "+t+"s ago"),this.schedulePing()}},{key:"cleanup",value:function(){this.pingTimer&&clearTimeout(this.pingTimer),this.pongWatcher&&clearTimeout(this.pongWatcher)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=e.length;if(!n)throw"bad number of channels.";var r=void 0;try{r=a(n,t)}catch(e){throw"unable to format number of channels"}return""+r+e.reduce(function(e,t){if(!(0,c.validateChannel)(t))throw"bad channel "+t;return e+=t},"")}function o(e){if(!e.match(/^[!-u]*$/))throw"not a base 85 msgId";if(e.length>l.default.Size.MessageId)throw"Bad msgId "+e+" longer than "+l.default.Size.MessageId+" characters.";for(;e.length<l.default.Size.MessageId;)e="!"+e;return e}function a(e,t){var n=parseInt(e,10),r=""+n;if(r.length>t)throw"Value "+n+" longer than "+t+" digits.";for(;r.length<t;)r="0"+r;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBuilder=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(42),u=n(15),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=n(8);t.MessageBuilder=function(){function e(){r(this,e)}return s(e,[{key:"formatConnectRequest",value:function(e,t,n){var r="C";switch(t>1&&(r+=a(t,l.default.Size.ProtocolVersion)),e){case f.TransportType.LongPoll:r+="L";break;case f.TransportType.Websocket:r+="P";break;default:throw"Unsupported method "+e}return n||(n=""),r+=a(n.length,l.default.Size.AuthSize),r+=n}},{key:"formatPingRequest",value:function(e){return"p"+a(e,l.default.Size.PingId)}},{key:"formatSubscribeRequest",value:function(e,t){var n="S";return n+=i(e,4),n+=o(t)}},{key:"formatUnsubscribeRequest",value:function(e){var t="U";return t+=i(e,4)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){if(e.length-t<1)return{status:d.Incomplete,parseIdx:null,msg:null};var r=e.charAt(t);switch(r){case"g":return a(e,t);case"M":return s(e,t,n);default:O.default.info("unexpected message type "+r)}return{status:d.Error,parseIdx:null,msg:null}}function a(e,t){if(e.length-t<1+g.default.Size.PingId)return{status:d.Incomplete,parseIdx:null,msg:null};var n=e.charAt(t);if(t++,"g"!==n)return O.default.info("Pong msg has bad msg_type "+n),{status:d.Error,parseIdx:null,msg:null};var r=void 0;try{r=u(e,t,g.default.Size.PingId)}catch(e){return O.default.info("invalid ping id in received message"),{status:d.Error,parseIdx:null,msg:null}}return{status:d.Success,parseIdx:r.idx,msg:new E.default(r.value)}}function s(e,t,n){var r=e.length,i=n>1?g.default.Size.Channel32Id:g.default.Size.Channel16Id,o=1+i;if(g.default.Size.MessageId,g.default.Size.SubjectId,g.default.Size.MessageLength,r-t<o)return{status:d.Incomplete,parseIdx:null,msg:null};var a=e.charAt(t);if(t++,"M"!==a)return O.default.info("published msg has bad message type "+a),{status:d.Error,parseIdx:null,msg:null};var s=t+i+g.default.Size.MessageId,p=e.charAt(s),m=void 0,v=void 0;if("G"===p)m=1,v=0;else if("U"===p){if(m=1+g.default.Size.UserId,s+m>=r)return O.default.info("not enough data to parse user id from"),{status:d.Incomplete,parseIdx:null,msg:null};var y=void 0;try{y=u(e,s+1,g.default.Size.UserId)}catch(e){return O.default.info("invalid user id"),{status:d.Error,parseIdx:null,msg:null}}v=y.value}else{if("W"!==p)return O.default.info("bad from type, should be G or U but received "+p),{status:d.Error,parseIdx:null,msg:null};if(m=1+g.default.Size.UserUUID,s+m>=r)return O.default.info("not enough data to parse uuid from"),{status:d.Incomplete,parseIdx:null,msg:null};v=e.substr(s+1,g.default.Size.UserUUID)}var E=t+i+g.default.Size.MessageId+m+g.default.Size.SubjectId+g.default.Size.MessageLength;if(E>=r)return O.default.info("not enough data to parse message from"),{status:d.Incomplete,parseIdx:null,msg:null};var S=void 0;try{S=c(e,E,g.default.Size.MessageLength)}catch(e){return O.default.info("unable to parse message length, "+e),{status:d.Error,parseIdx:null,msg:null}}var _=S,w=_.value,C=_.idx;if(r-C<w)return{status:d.Incomplete,parseIdx:null,msg:null};var I=void 0;try{I=l(e,t,n)}catch(e){return O.default.info("unable to parse channel, "+e),{status:d.Error,parseIdx:null,msg:null}}var T=I,A=T.channel;t=T.idx;var R=void 0;try{R=f(e,t)}catch(e){return O.default.info("unable to parse message id, "+e),{status:d.Error,parseIdx:null,msg:null}}var k=R,N=k.msgId;t=k.idx,t+=m;var P=void 0;try{P=h(e,t)}catch(e){return O.default.info("unable to parse subject, "+e),{status:d.Error,parseIdx:null,msg:null}}var M=P,U=M.subject;t=M.idx;var x=e.substr(C,w);t=C+w;var D=new b.default(A,N,v,U,x);return{status:d.Success,parseIdx:t,msg:D}}function c(e,t,n){if(t+n>e.length)throw"data too short";var r=e.substr(t,n);if(!r.match(/^[0-9a-fA-F]+$/))throw"not a number";var i=parseInt(r,16);if(isNaN(i)||i<0)throw"not a number";return{value:i,idx:t+n}}function u(e,t,n){if(t+n>e.length)throw"data too short";var r=e.substr(t,n);if(!r.match(/^[0-9]+$/))throw"not a number";var i=parseInt(r,10);if(isNaN(i)||i<0)throw"not a positive number";return{value:i,idx:t+n}}function l(e,t,n){var r=n>1?g.default.Size.Channel32Id:g.default.Size.Channel16Id;if(t+r>e.length)throw"data too short";var i=e.substr(t,r);if(!(0,v.validateChannel)(i))throw"bad channel id";return{channel:i,idx:t+r}}function f(e,t){var n=g.default.Size.MessageId;if(t+n>e.length)throw"data too short";var r=e.substr(t,n);if(!r.match(/^[!-u]+$/))throw"not a base 85 msgId";return{msgId:r,idx:t+n}}function h(e,t){var n=g.default.Size.SubjectId;if(t+n>e.length)throw"data too short";var r=e.substr(t,n);if(!(0,v.validateSubject)(r))throw"bad subject id";return{subject:r,idx:t+n}}Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var d,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(15),g=r(m),v=n(42),y=n(129),E=r(y),S=n(130),b=r(S),_=n(9),O=r(_);t.Parser=function(){function e(){i(this,e)}return p(e,[{key:"parseData",value:function(e,t){for(var n=null,r=0,i=[];;){var a=o(e,r,t);if(n=a.status,r=a.parseIdx,n!==d.Success)break;if(i.push(a.msg),r===e.length)break}return r<e.length&&O.default.info("extra data in message - discarding "+e.substring(r)),n===d.Error?(O.default.info("bad message received, unable to parse"),{ok:!1,messages:null}):{ok:!0,messages:i}}}]),e}();!function(e){e[e.Error=0]="Error",e[e.Incomplete=1]="Incomplete",e[e.Success=2]="Success"}(d||(d={}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){r(this,e),this.type="PONG",this.pingId=t};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function e(t,n,i,a,s){r(this,e),this.type="MSG",this.channel=t,this.msg_id=n,this.user_id=i,this.subject=a,this.payload=s,o.default.Patterns.Channel16PaddedPattern.test(this.channel)?(this.channel_type=this.channel.substring(0,6),this.channel_number=parseInt(this.channel.substring(24),10)):o.default.Patterns.Channel32Pattern.test(this.channel)?(this.channel_type=this.channel.substring(0,8),this.channel_number=this.channel.substring(8)):(this.channel_type=this.channel.substring(0,6),this.channel_number=parseInt(this.channel.substring(6),10)),this.subject_type=this.subject.substring(0,6),this.subject_number=parseInt(this.subject.substring(6),10)};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxTransport=void 0;var o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(14),c=n(16),u=r(c),l=n(8),f=n(9),h=r(f);!function(e){e.Disconnected="DISCONNECTED",e.Connecting="CONNECTING",e.Closing="CLOSING",e.Open="OPEN",e.AwaitingResponse="AWAITING_RESPONSE"}(o||(o={}));var d=0;t.AjaxTransport=function(){function e(t,n,r){var a=this;i(this,e),this.type=l.TransportType.LongPoll,this.conId="ajaxcon"+ ++d,this.status=o.Disconnected,this.protocolVersion=1,this.connectionEventListeners=new Map,this.authToken=null,this.onreadystatechange=function(e){switch(a.socket.readyState){case 1:a.onopen(o.Open);break;case 4:a.ondone(o.Disconnected)}},this.onopen=function(e){a.status=o.Open,a.socket.setRequestHeader("content-type","text/plain"),a.connectionEventListeners.get(u.default.CONNECTED).forEach(function(t){return t(e)})},this.ondone=function(e){if(a.socket.status,200!==a.socket.status)return void a.handleClose(l.DisconnectReason.BadResponse);var t=a.socket.responseText;t&&setTimeout(function(){a.handleMessage(t)},0),a.handleClose(l.DisconnectReason.Expected)},this.handleMessage=function(e){var t=s.Parser.parseData(e,a.protocolVersion),n=t.ok,r=t.messages;if(!n)return void h.default.info("unable to parse messages from data received, ignoring");r.forEach(function(e){h.default.info("dispatching parsed message %o",e),a.connectionEventListeners.get(u.default.MESSAGE).forEach(function(t){return t(e)})})},this.handleClose=function(e){a.status=o.Disconnected,a.connectionEventListeners.get(u.default.DISCONNECTED).forEach(function(t){return t(e)})},this.protocolVersion=t,this.uri=n,this.authToken=r}return a(e,[{key:"on",value:function(e,t){return this.connectionEventListeners.has(e)?this.connectionEventListeners.get(e).push(t):this.connectionEventListeners.set(e,[t]),this}},{key:"connect",value:function(){var e=this;return h.default.info("connecting "+this.conId+" to "+this.uri),this.status=o.Connecting,this.socket=new XMLHttpRequest,this.socket.onreadystatechange=function(t){return e.onreadystatechange(t)},setTimeout(function(){e.socket.open("POST",e.uri,!0)},0),this}},{key:"disconnect",value:function(e){h.default.info("Disconnecting "+this.conId+" due to "+e),this.status=o.Closing,this.socket&&this.socket.abort()}},{key:"send",value:function(e){if(this.status===o.Open){if(""===e)return h.default.info("ignoring send of empty data"),!0;var t=s.MessageBuilder.formatConnectRequest(this.type,this.protocolVersion,this.authToken)+e;return this.status=o.AwaitingResponse,this.socket.send(t),!0}return this.status===o.AwaitingResponse?(h.default.info("terminating existing connection as new data needs to be sent"),this.disconnect(l.DisconnectReason.Requested),!0):(h.default.info("socket status "+this.status+" so refusing send"),!1)}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatus=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),c=r(s),u=n(8),l=n(9),f=r(l),h=t.ConnectionStatus=void 0;!function(e){e.CONNECTING="Connecting",e.CONNECTED="Connected",e.DISCONNECTED="Disconnected"}(h||(t.ConnectionStatus=h={}));var d=function(){function e(t,n){var r=this;o(this,e),this.status=h.DISCONNECTED,this.ok=!1,this.sendBuffer=[],this.connectionEventListeners=new Map,this.handleConnected=function(e){f.default.info('received connected event in ConnectionManager, have "%s" buffered to send',r.sendBuffer.join("")),r.status=h.CONNECTED,r.ok=!0;var t=r.sendBuffer.splice(0).join("");""!==t&&(f.default.info("sending buffered data, %s",t),r.socket.send(t)),r.connectionEventListeners.has(c.default.CONNECTED)&&r.connectionEventListeners.get(c.default.CONNECTED).forEach(function(t){return t(e)})},this.handleDisconnected=function(e){f.default.info("received disconnected event in ConnectionManager with reason, %s",e),r.status=h.DISCONNECTED,r.ok=!1,e===u.DisconnectReason.Expected?r.reconnect(!1):r.reconnect()},this.handleMessage=function(e){r.connectionEventListeners.has(c.default.MESSAGE)&&r.connectionEventListeners.get(c.default.MESSAGE).forEach(function(t){return t(e)})},this.handleError=function(e){r.connectionEventListeners.has(c.default.ERROR)&&r.connectionEventListeners.get(c.default.ERROR).forEach(function(t){return t(e)})},this.configuration=t,this.authToken=n,f.default.info("initialised ConnectionManager with servers %o, version %s, and authToken %s",t.servers,t.version,n)}return a(e,[{key:"on",value:function(e,t){return f.default.info("registered %s event listener",e),this.connectionEventListeners.has(e)?this.connectionEventListeners.get(e).push(t):this.connectionEventListeners.set(e,[t]),this}},{key:"setAuthToken",value:function(e){this.authToken=e,this.status!==h.DISCONNECTED&&(this.currentServer.connectionAttempts=0,this.socket.disconnect(u.DisconnectReason.Requested))}},{key:"clearAuthToken",value:function(){this.setAuthToken(void 0)}},{key:"open",value:function(){var e=this;return this.status!==h.DISCONNECTED?void f.default.info("already connected, not opening new connection"):(this.chooseServer().then(function(t){switch(e.currentServer=t,e.status=h.CONNECTING,e.currentServer.type){case u.TransportType.Websocket:e.socket=new u.WebsocketTransport(e.configuration.version,e.currentServer.uri,e.authToken,e.configuration.connection);break;case u.TransportType.LongPoll:e.socket=new u.AjaxTransport(e.configuration.version,e.currentServer.uri,e.authToken)}e.socket.on(c.default.CONNECTED,e.handleConnected).on(c.default.DISCONNECTED,e.handleDisconnected).on(c.default.MESSAGE,e.handleMessage).on(c.default.ERROR,e.handleError).connect()}).catch(function(e){f.default.info("No servers found to establish connection - %s",e)}),this)}},{key:"reconnect",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.status!==h.DISCONNECTED)return void f.default.info("reconnect called on a disconnected connection, ignoring");if(!e)return void this.open();if(this.currentServer.connectionAttempts>=this.configuration.connection.retries)return f.default.info("reconnection attempts exhausted, will reset after %s seconds cooldown",this.configuration.connection.cooldownSeconds),this.currentServer.blacklistedUntil=Date.now()+1e3*this.configuration.connection.cooldownSeconds,this.currentServer.connectionAttempts=0,void this.open();var t=this.currentServer.connectionAttempts?Math.min(Math.pow(2,this.currentServer.connectionAttempts++),this.configuration.connection.maxRetryDelaySeconds):this.currentServer.connectionAttempts++;f.default.info("blacklisting %s for %s seconds",this.currentServer.uri,t),this.currentServer.blacklistedUntil=Date.now()+1e3*t,this.open()}},{key:"chooseServer",value:function(){var e=this.configuration.servers.find(function(e){return Date.now()>e.blacklistedUntil});if(e)return new Promise(function(t){t(e)});var t=[].concat(i(this.configuration.servers)).sort(function(e,t){return t.blacklistedUntil<e.blacklistedUntil?1:0})[0];if(t){var n=t.blacklistedUntil-Date.now();return f.default.info("waiting %ss for next usable server",(n/1e3).toFixed(0)),new Promise(function(e){setTimeout(function(){e(t)},n)})}return Promise.reject("NO_SERVERS_AVAILABLE")}},{key:"send",value:function(e){if(f.default.info("connection manager received data to send, %s",e),this.status!==h.CONNECTED)return f.default.info("buffering data %o for sending once a connection is established"),void this.sendBuffer.push(e);this.socket.send(e)||(f.default.info("buffering send data due to underlying socket refusing send"),this.sendBuffer.push(e))}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){var t=new Map;return e.forEach(function(e){var n=e.channel,r=e.lastMsgId;t.has(r)?t.get(r).push(n):t.set(r,[n])}),t}function i(e){var t=[];return r(e).forEach(function(e,n){t.push(o.MessageBuilder.formatSubscribeRequest(e,n))}),t.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.groupChannelsByLastMsgId=r,t.buildChannelsRequest=i;var o=n(14)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={SYNDICATED_MESSAGES_CACHE:"GCM_sj_notifications"};t.GcmStorage=function(){function e(){r(this,e)}return i(e,[{key:"getSyndicatedNotifications",value:function(){return null===localStorage.getItem(o.SYNDICATED_MESSAGES_CACHE)&&localStorage.setItem(o.SYNDICATED_MESSAGES_CACHE,JSON.stringify([])),JSON.parse(localStorage.getItem(o.SYNDICATED_MESSAGES_CACHE))}},{key:"hasSyndicatedMessageBeenShow",value:function(e){return this.getSyndicatedNotifications().includes(e)}},{key:"appendShownSyndicationMessage",value:function(e){var t=this.getSyndicatedNotifications();t.push(e),localStorage.setItem(o.SYNDICATED_MESSAGES_CACHE,JSON.stringify(t))}}]),e}()},function(e,t,n){(function(e){!function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},r=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},i=function(e){return decodeURIComponent(e).replace(/\+/g," ")};"URLSearchParams"in e&&"a=1"===new URLSearchParams("?a=1").toString()||function(){var o=function(e){if(Object.defineProperty(this,"_entries",{value:{}}),"string"==typeof e){if(""!==e){e=e.replace(/^\?/,"");for(var t,n=e.split("&"),r=0;r<n.length;r++)t=n[r].split("="),this.append(i(t[0]),t.length>1?i(t[1]):"")}}else if(e instanceof o){var a=this;e.forEach(function(e,t){a.append(e,t)})}},a=o.prototype;a.append=function(e,t){e in this._entries?this._entries[e].push(t.toString()):this._entries[e]=[t.toString()]},a.delete=function(e){delete this._entries[e]},a.get=function(e){return e in this._entries?this._entries[e][0]:null},a.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},a.has=function(e){return e in this._entries},a.set=function(e,t){this._entries[e]=[t.toString()]},a.forEach=function(e,t){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++)e.call(t,n[i],r,this)}},a.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),n(e)},a.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},a.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),n(e)},t&&(a[Symbol.iterator]=a.entries),a.toString=function(){var e="";return this.forEach(function(t,n){e.length>0&&(e+="&"),e+=r(n)+"="+r(t)}),e},e.URLSearchParams=o}()}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(e){if(function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(e,t){"string"!=typeof e&&(e=String(e));var n=document.implementation.createHTMLDocument("");if(window.doc=n,t){var r=n.createElement("base");r.href=t,n.head.appendChild(r)}var i=n.createElement("a");if(i.href=e,n.body.appendChild(i),i.href=i.href,":"===i.protocol||!/:/.test(i.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:i})},r=n.prototype,i=function(e){Object.defineProperty(r,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})};["hash","host","hostname","port","protocol","search"].forEach(function(e){i(e)}),Object.defineProperties(r,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0},searchParams:{get:function(){var e=new URLSearchParams(this.search),t=this;return["append","delete","set"].forEach(function(n){var r=e[n];e[n]=function(){r.apply(e,arguments),t.search=e.toString()}}),e},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval(function(){e.location.origin=t()},100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(t,n(12))},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WIDGET_UI=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(138),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(t.WIDGET_UI="Widget_UI",function(){function e(t){var n=this;r(this,e),this.widgetUI=document.createElement("div"),this.widgetUI.id="featureWidget",this.widgetUI.zIndex=10002,this.widgetFailedToLoad=!1,this.gameSparksHander=t,this.loadWidgetScript().then(function(e){n.widget=window.featureWidget,n.widget.initWidget(n.gameSparksHander)}).catch(function(e){n.widgetFailedToLoad=!0}),this.handleFeatureNotification=function(e){n.sendNotificationToWidget(e)}}return i(e,[{key:"loadWidgetScript",value:function(){var e=this;return new Promise(function(t,n){a.default.asyncAppendToBody(e.widgetUI).then(function(r){a.default.addScript(e.gameSparksHander.gcmOrigin+"/feature-ui-widget/js/main.js").then(function(e){t()}).catch(function(t){document.body.removeChild(e.widgetUI),n()})}).catch(function(e){n()})})}},{key:"sendNotificationToWidget",value:function(e){var t=this;this.widgetFailedToLoad||(this.widget?this.widget.handleFeatureUpdates(e):setTimeout(function(){t.handleFeatureNotification(e)},1e3))}}]),e}());t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(25),a=function(){function e(){return r(this,e),e.instance||(e.instance=this),e.instance}return i(e,[{key:"addScript",value:function(e){return new o.Promise(function(t,n){var r=document.createElement("script");r.type="text/javascript",r.src=e,r.addEventListener("load",function(){return t(r)},!1),r.addEventListener("error",function(){return n(r)},!1),document.body.appendChild(r)})}},{key:"asyncAppendToBody",value:function(e){return new o.Promise(function(t,n){try{document.body.appendChild(e),t()}catch(e){n(e)}})}}]),e}(),s=new a;t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OgsClient=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(22),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(25),c=t.OgsClient=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e,t){this.url=e.url,this.basePath="ogsclient",this.ogsParams=t,this.axiosClient=a.default.create({})}},{key:"buildBaseUri",value:function(){return this.url+"/"+this.basePath}},{key:"buildLiveServAuthenticationUri",value:function(){return this.buildBaseUri()+"/getliveservtoken"}},{key:"getLiveServToken",value:function(e){var t=this.buildLiveServAuthenticationUri(),n={opId:this.ogsParams.operatorid,device:this.ogsParams.device,currency:this.ogsParams.currency,gpGameId:this.ogsParams.gameid,ogsClientToken:e};return this.axiosClient.post(t,n).then(function(e){if(0==e.data.rc)return e.data;s.Promise.reject(error.response.data)}).catch(function(e){if(void 0!=e.response)switch(e.response.status){case 401:return s.Promise.reject(e.response.data)}return s.Promise.reject(e)})}}]),e}();t.default=c}]);
