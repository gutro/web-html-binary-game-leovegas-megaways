var gcm=function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.launcher=t.GCMLauncher=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),i=r(2);r(3);var s=t.GCMLauncher=function(){function e(){n(this,e),this.gcmWindow=null,this.gcmOrigin=null,this.ogsParams=null,this.supressGameSizeAdjust=!0,this.stringEndsWithPolyfill()}return a(e,[{key:"init",value:function(){var e=this.getUrlParam("gameUrl");addEventListener("message",this.receiveMessage.bind(this),!1);var t=document.getElementById("gameIFrame"),r=document.getElementById("footerIFrame");if(void 0!=e&&null!=e){this.extractOGSParams(window.location.search,!0);var n=this.ogsParams.operatorid,a=this.ogsParams.device;t.src=e,this.isFooterEnabled(n,a)?this.loadFooter(n,a):(r.style.height="0%",r.style.width="0%")}else t.style.display="none",r.style.display="none",document.body.style.background="transparent"}},{key:"loadOperatorPostMsgLibrary",value:function(){this.ogsParams.operatorPostMessageLibraryUrl="";var e=GCMConfig.getOperatorSpecificProperty("operatorPostMsgLibrary",this.ogsParams.operatorid,this.ogsParams.device);if(void 0!=e){this.ogsParams.operatorPostMessageLibraryUrl=e;this.addServiceScript(e).then(function(e){return console.log("Operator post msg library script loaded")},function(e){throw new Error("Failed to load Operator post msg library: ",e)})}}},{key:"extractOGSParams",value:function(e,t){var r=i.UrlUtil.getAllParams(e,t),n={};r.forEach(function(e){"gameUrl"!=name&&(n[e[0]]=decodeURIComponent(e[1]))}),this.ogsParams=n}},{key:"getUrlParam",value:function(e){if(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(window.location.search))return decodeURIComponent(e[1])}},{key:"isKnownGameProvider",value:function(e){return GCMConfig.gameProviderHostNameList.some(function(t){return e.endsWith(t)})}},{key:"receiveMessage",value:function(e){if(this.isKnownGameProvider(e.origin))try{var t=JSON.parse(e.data),r=t.action,n=t.params;o.Validate.isValidGCMLauncherMethod(r)?this[r](e,n):console.log("GCM Launcher: No permission to execute method "+r)}catch(e){}else console.log("Discarding post message from un-registered game provider: "+e.origin)}},{key:"isFooterEnabled",value:function(e,t){return!0===GCMConfig.getOperatorSpecificProperty("footerEnabled",e,t)}},{key:"getFooterDetails",value:function(e,t){return{footerUrl:GCMConfig.getOperatorSpecificProperty("footerUrl",e,t),footerSize:GCMConfig.getOperatorSpecificProperty("footerSize",e,t)}}},{key:"loadFooter",value:function(e,t){var r=this.getFooterDetails(e,t),n=document.getElementById("footerIFrame");n.src=r.footerUrl,n.style.height=r.footerSize.height,n.style.width=r.footerSize.width}},{key:"launcherLoaded",value:function(e,t){this.extractOGSParams(t.gameUrl,!1),this.loadCommonUI(e,t);var r=document.getElementById("commonUIIFrame");r.style.height="100%",r.style.width="100%"}},{key:"loadCommonUI",value:function(e,t){var r=this,n=this.ogsParams.gameid;t&&t.gameName&&""!=t.gameName&&(n=t.gameName),this.ogsParams.gameName=n,document.title=n;var a={operatorId:this.ogsParams.operatorid,currency:this.ogsParams.currency,device:this.ogsParams.device,extGameId:this.ogsParams.gameid,gameName:this.ogsParams.gameName,playMode:this.ogsParams.mode,sessionId:this.ogsParams.sessionid,loggedIn:null!=this.ogsParams.sessionid,lang:this.ogsParams.lang};this.ogsParams.realitycheck_uk_history&&(a.realitycheck_uk_history=this.ogsParams.realitycheck_uk_history),this.ogsParams.realitycheck_uk_elapsed&&(a.realitycheck_uk_elapsed=this.ogsParams.realitycheck_uk_elapsed),this.ogsParams.realitycheck_uk_proceed&&(a.realitycheck_uk_proceed=this.ogsParams.realitycheck_uk_proceed),this.ogsParams.realitycheck_uk_exit&&(a.realitycheck_uk_exit=this.ogsParams.realitycheck_uk_exit),this.ogsParams.lobbyurl&&(a.lobbyurl=this.ogsParams.lobbyurl),["responsiblegaming_url","elapsedtime","selfassessment_url","depositlimit_url","selfexclusion_url"].map(function(e){r.ogsParams[e]&&(a[e]=r.ogsParams[e])});var o=this.ogsParams.device,i=this.ogsParams.operatorid;if(this.isCMAEnabled()){var s=this.ogsParams.bridgeScriptUrl.match(/^https?\:\/\/(?:www\.)?([^\/?#]+)(?:[\/?#]|$)/i),c=s&&s[1];this.ogsParams.cmaScriptUrl=GCMConfig.getCMAScriptUrl(c,i,o),this.ogsParams.bridgeScriptUrl=""}t&&(t.cuiPosition&&(a.cuiPosition=t.cuiPosition),t.gameName&&(a.gameName=t.gameName));var u=GCMConfig.getOperatorSpecificProperty("commonUIUrl",i,o)+"?gcmVersion=v4",l=new URL(u);this.gcmWindow=e.source,this.gcmOrigin=e.origin,this.configureGCM(l.hostname),this.loadCommonUIIframe(l,a,this.gcmOrigin)}},{key:"getOGSParams",value:function(e,t){var r=!1,n={};void 0!=t&&(r=t.singlePostMsgArg),r?n.ogsParams=this.ogsParams:n=this.ogsParams;var a=this.createPostMessage("setOGSParams",n);e.source.postMessage(a,e.origin)}},{key:"configureGCM",value:function(e){this.loadOperatorPostMsgLibrary();var t={};t.commonUIOrigin=e,t.ogsParams=this.ogsParams,t.gcmConfiguration=GCMConfig.getGCMServiceConfiguration(),t.gsConfiguration=GCMConfig.getOperatorSpecificProperty("gamesparks",this.ogsParams.operatorid,"default"),t.jqConfiguration=GCMConfig.getOperatorSpecificProperty("jackpotQuery",this.ogsParams.operatorid,"default"),t.ogsClientConfiguration=GCMConfig.getOperatorSpecificProperty("ogsClient",this.ogsParams.operatorid,"default"),t.lsConfiguration=GCMConfig.getOperatorSpecificProperty("liveserv",this.ogsParams.operatorid,"default");var r=this.createPostMessage("configure",t);this.gcmWindow.postMessage(r,this.gcmOrigin)}},{key:"loadCommonUIIframe",value:function(e,t,r){var n=document.getElementById("commonUIIFrame");n.onload=function(){var a={};a.action="init",a.gcmHostName=r,a.cuiParams=t;var o=JSON.stringify(a);n.contentWindow.postMessage(o,e.origin)},n.src=e.href,"desktop"==t.device&&addEventListener("resize",this.launcherResized.bind(this),!1)}},{key:"commonUIReady",value:function(e,t){document.getElementById("commonUIIFrame").style.display="block"}},{key:"gameRevealed",value:function(e,t){if("mobile"==this.ogsParams.device){var r=document.getElementById("commonUIIFrame");r.style.height="100%",r.style.display="inline"}this.supressGameSizeAdjust=!1,this.launcherResized()}},{key:"reload",value:function(e,t){this.isHostedInIFrame()&&window.parent.postMessage(this.buildReloadRedirectPostMessage("reload"),"*"),window.location.reload()}},{key:"redirect",value:function(e,t){var r=t[0];this.isHostedInIFrame()&&window.parent.postMessage(this.buildReloadRedirectPostMessage("redirect",r),"*"),r&&window.location.replace(r)}},{key:"isHostedInIFrame",value:function(){return self.window!==top.window}},{key:"buildReloadRedirectPostMessage",value:function(e,t){var r=t||"",n={action:e,url:r};return JSON.stringify(n)}},{key:"launcherResized",value:function(){var e=this.createPostMessage("launcherResized",[window.innerWidth,window.innerHeight]);this.gcmWindow.postMessage(e,this.gcmOrigin)}},{key:"commonUIResize",value:function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=!0;!1!==t[4]&&0!==t[4]||(i=!1);var s=document.getElementById("commonUIIFrame");if(window.scrollTo(0,1),a&&o)s.style.height=r,s.style.width=n,s.style.left=a,s.style.top=o,s.style.marginLeft=0;else if(r&&(s.style.height=r),n){s.style.width=n;var c=s.offsetWidth;s.style.left="50%",s.style.marginLeft=-c/2+"px"}"desktop"==this.ogsParams.device&&i&&!this.supressGameSizeAdjust&&this.reAdjustGameIFrame(r)}},{key:"reAdjustGameIFrame",value:function(e){var t=document.getElementById("gameIFrame");t.style.top=e;var r=document.getElementById("footerIFrame").style.height,n="calc(100% - "+e+" - "+r+")";t.style.height=n}},{key:"isHeight",value:function(e){return/^\d+(\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)/.test(e)}},{key:"isCMAEnabled",value:function(){return this.ogsParams.bridgeScriptUrl&&""!=this.ogsParams.bridgeScriptUrl}},{key:"createPostMessage",value:function(e,t){var r={action:e,params:t};return JSON.stringify(r)}},{key:"stringEndsWithPolyfill",value:function(){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})}},{key:"addServiceScript",value:function(e){return new Promise(function(t,r){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.addEventListener("load",function(){return t(n)},!1),n.addEventListener("error",function(){return r(n)},!1),document.body.appendChild(n)})}}]),e}();t.launcher=new s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=["getOGSParams","loadCommonUI","commonUIReady","commonUIResize","gameRevealed","reload","redirect","showCommonUI","hideCommonUI","launcherLoaded"],s=["configure","launcherResized","registerService","commonUIReady","commonUIResize","gameRevealed","optionHasChanged","resume","reload","redirect","showCommonUI","hideCommonUI","isGameIdle","balancesUpdate","setOGSParams","gsPlayerAction","syndicateJackpotWinAwardDialogClosed"],c=["stakeUpdate","paidUpdate","balancesUpdate","loadProgressUpdate","gameReady","configReady","gameAnimationStart","gameAnimationComplete","gameIdle","handleError","handleSessionDurationUpdate","regOption","optionHasChanged","handleSessionStats","gameResized","gameHasLoadingScreen","handleMessageTrigger","handleGSTrigger","handleFreeRoundsAward","handleFreeRoundsInProgress","handleFreeRoundsUpdate","pollJackpots","showSyndicateJackpotWinAward","showSyndicateJackpotProgressBar","disposeSyndicateJackpotProgressBar"];t.Validate=function(){function e(){n(this,e)}return o(e,null,[{key:"isBalances",value:function(e,t){if(!e)return!1;if("object"!==a(e.CASH))return!1;for(var r in e)if("number"!=typeof e[r].amount)return!1;if(t&&"FREESPIN"==t){if("object"!==a(e.FREESPIN))return!1}else if("object"==a(e.FREESPIN))return!1;return!0}},{key:"isErrorInfo",value:function(e){return!!e&&!(void 0===e.errorCode||void 0===e.errorMessage)}},{key:"isValidCurrencyOps",value:function(e){if(!e)return!1;var t=/^[\D]$/,r=/^[\D]*$/;return t.test(e.ccy_thousand_separator)&&t.test(e.ccy_decimal_separator)&&r.test(e.ccy_code)}},{key:"isNumericValue",value:function(e){return"number"==typeof e&&!isNaN(parseFloat(e))&&isFinite(e)}},{key:"isIntegerValue",value:function(e){return"number"==typeof e&&!isNaN(parseInt(e,10))&&parseInt(e,10)==e&&isFinite(e)}},{key:"isPercentValue",value:function(e){return!!this.isNumericValue(e)&&(parseFloat(e)<=100&&!(parseFloat(e)<0))}},{key:"isHeight",value:function(e){return/^\d+(\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)/.test(e)}},{key:"isAlphaNumeric",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9]+$/.test(e)}},{key:"isValidGameName",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9\-_]+$/.test(e)}},{key:"isValidLanguage",value:function(e){if("string"!=typeof e)return!1;var t=e.split("-"),r=/^[a-z]{2}$/;if(1===t.length)return r.test(t[0]);if(2===t.length){var n=/^[A-Z]{2}$/;return r.test(t[0])&&n.test(t[1])}return!1}},{key:"isSingleLetter",value:function(e){return/^[a-zA-Z]$/.test(e)}},{key:"isSingleDigit",value:function(e){return/^[0-9]$/.test(e)}},{key:"isEnumOption",value:function(e,t){var r=!1;for(var n in e)if(t===e[n]){r=!0;break}return r}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isDefinedAndNotNull",value:function(e){return void 0!==e&&null!==e&&""!=e}},{key:"isElement",value:function(e){return Boolean(e&&"function"==typeof e.appendChild)}},{key:"isValidCommonUIMethod",value:function(e){return-1!=c.indexOf(e)}},{key:"isValidGCMMethod",value:function(e){return-1!=s.indexOf(e)}},{key:"isValidGCMLauncherMethod",value:function(e){return-1!=i.indexOf(e)}},{key:"isValidBoolean",value:function(e){return"boolean"==typeof e}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=t.UrlUtil=function(){function e(){n(this,e)}return a(e,null,[{key:"addParametersToUrl",value:function(e,t){for(var r in t){var n=r+"="+encodeURIComponent(t[r]),a="&";if(e.indexOf("?")<0)a="?";else{var o=e.slice(-1);"&"==o&&(a=""),"?"==o&&(a="")}e+=a+n}return e}},{key:"getSearchParameterByName",value:function(e,t){if("string"!=typeof e)throw new Error("gcmBridge.getSearchParameterByName: Invalid argument name - not a string");if("string"!=typeof t)throw new Error("gcmBridge.getSearchParameterByName: Invalid argument search - not a string");var r,n;return r=new RegExp("[?&]"+e+"=([^&]*)"),n=r.exec(t),n&&n.length>1?decodeURIComponent(n[1].replace(/\+/g," ")):null}},{key:"updateSearchParameterByName",value:function(t,r,n){var a=e.getSearchParameterByName(t,n),o=n;return a&&(o=n.replace(t+"="+a,t+"="+r)),o}},{key:"getGCMParams",value:function(e){var t={};if(null!=e){var r=decodeURIComponent(e).split("|"),n=0;for(n=0;n<r.length;n++){var a=r[n].split("="),o=a[0];o=o.replace("gcm",""),o=o.charAt(0).toLowerCase()+o.slice(1),t[o]=a[1]}}return t}},{key:"updateGCMParams",value:function(t,r,n){var a="",o=new Array,i=e.getSearchParameterByName("gcmParams",n);if(null!=i){o=e.getGCMParams(i);var s=t.replace("gcm","");s=s.charAt(0).toLowerCase()+s.slice(1),a=o[s]}var c=n;return a&&(c=n.replace(t+"%3D"+a,t+"%3D"+r)),c}},{key:"getUrlParams",value:function(){var t={},r=e.getSearchParameterByName("gcmParams",window.parent.location.href);return r?t=e.getGCMParams(r):(t.gameName=e.getSearchParameterByName("gameName",window.location.search),t.playMode=e.getSearchParameterByName("playMode",window.location.search),t.channel=e.getSearchParameterByName("channel",window.location.search)),t}},{key:"getLaunchParamsObj",value:function(e){var t={};if(null!=e){var r=decodeURIComponent(e).split("&"),n=0;for(n=0;n<r.length;n++){var a=r[n].split("="),o=a[0];o=o.charAt(0).toLowerCase()+o.slice(1),t[o]=a[1]}}return t}},{key:"checkURIIsRelative",value:function(e){if("string"!=typeof e)throw new Error("UrlUtil.checkURIIsRelative: Invalid argument url - not a string");return!/^([a-z0-9+.-]+):\/\//.test(e)&&(!/^\/\//.test(e)&&/^[a-zA-Z0-9\/\.\-_]*$/.test(e))}},{key:"getAllParams",value:function(e,t){var r=[],n=null;n=t?e.substring(1).split("&"):e.slice(e.indexOf("?")+1).split("&");for(var a=n.length-1;a>=0;a--){var o=n[a].split("=");r.push(o)}return r}}]),e}(),i=new o;t.default=i},function(e,t,r){(function(e){!function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),r=function(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(r[Symbol.iterator]=function(){return r}),r},n=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},a=function(e){return decodeURIComponent(e).replace(/\+/g," ")};"URLSearchParams"in e&&"a=1"===new URLSearchParams("?a=1").toString()||function(){var o=function(e){if(Object.defineProperty(this,"_entries",{value:{}}),"string"==typeof e){if(""!==e){e=e.replace(/^\?/,"");for(var t,r=e.split("&"),n=0;n<r.length;n++)t=r[n].split("="),this.append(a(t[0]),t.length>1?a(t[1]):"")}}else if(e instanceof o){var i=this;e.forEach(function(e,t){i.append(e,t)})}},i=o.prototype;i.append=function(e,t){e in this._entries?this._entries[e].push(t.toString()):this._entries[e]=[t.toString()]},i.delete=function(e){delete this._entries[e]},i.get=function(e){return e in this._entries?this._entries[e][0]:null},i.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},i.has=function(e){return e in this._entries},i.set=function(e,t){this._entries[e]=[t.toString()]},i.forEach=function(e,t){var r;for(var n in this._entries)if(this._entries.hasOwnProperty(n)){r=this._entries[n];for(var a=0;a<r.length;a++)e.call(t,r[a],n,this)}},i.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),r(e)},i.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),r(e)},t&&(i[Symbol.iterator]=i.entries),i.toString=function(){var e="";return this.forEach(function(t,r){e.length>0&&(e+="&"),e+=n(r)+"="+n(t)}),e},e.URLSearchParams=o}()}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(e){if(function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return!1}}()||function(){var t=e.URL,r=function(e,t){"string"!=typeof e&&(e=String(e));var r=document.implementation.createHTMLDocument("");if(window.doc=r,t){var n=r.createElement("base");n.href=t,r.head.appendChild(n)}var a=r.createElement("a");if(a.href=e,r.body.appendChild(a),a.href=a.href,":"===a.protocol||!/:/.test(a.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:a})},n=r.prototype,a=function(e){Object.defineProperty(n,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})};["hash","host","hostname","port","protocol","search"].forEach(function(e){a(e)}),Object.defineProperties(n,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0},searchParams:{get:function(){var e=new URLSearchParams(this.search),t=this;return["append","delete","set"].forEach(function(r){var n=e[r];e[r]=function(){n.apply(e,arguments),t.search=e.toString()}}),e},enumerable:!0}}),r.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},r.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=r}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(r){setInterval(function(){e.location.origin=t()},100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(t,r(4))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r}]);
